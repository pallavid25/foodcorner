var EntityCompareComponent;(function(n){function u(n){t[n]||(t[n]=new r(n))}var t=[],i=function(){function n(n){this.heights=[];this.valueSelector=n;this.row=n.parentElement;this.sourceValue=this.row.firstElementChild}return n}(),r=function(){function n(n){var e=this,t,r,u,s,o,f,h,l,a;if((this.id=n,this.facts=[],this.dataK=[],this.dataAppNs=[],t=this,r=_ge(n),r)&&(u=_qs(".ux_ecmp-sel",r),u)&&(t.numEntities=u.options.length,!(t.numEntities<2))){u.disabled=!1;t.previousButton=_qs(".ux_ecmp-btn.prev",r);t.previousButton&&sj_be(t.previousButton,"click",function(){e.previousItem()});t.nextButton=_qs(".ux_ecmp-btn.next",r);t.nextButton&&(t.nextButton.tabIndex=0,t.nextButton.ariaDisabled=null,sj_be(t.nextButton,"click",function(){e.nextItem()}));s=r.querySelector(".b_onpage_expansion");s&&s.id&&sj_evt.bind("exp_animation_end",function(){e.updateFactHeights()});t.selectElement=u;t.parentElement=r;t.selectedEntityIndex=0;var v=t.parentElement.querySelector("ul"),c=v.querySelectorAll(".ux_ecmp-esel"),y=c.length;for(o=0;o<y;o++)t.facts.push(new i(c[o]));for(this.updateFactHeights(),window.addEventListener("resize",function(){return e.updateFactHeights()}),f=0;f<t.numEntities;++f)h=u.options[f],l=this.GetAndWipeAttribute(h,"data-k"),t.dataK[f]=l,a=this.GetAndWipeAttribute(h,"data-appns"),t.dataAppNs[f]=a;sj_be(u,"change",function(){e.selectionChanged()})}}return n.prototype.updateFactHeights=function(){for(var n,f,u,t,i=this,e=i.facts.length,r=0;r<e;r++){for(n=i.facts[r],n.row.style.height=null,f=n.sourceValue.clientHeight,u=n.valueSelector.children,t=0;t<u.length;t++)n.heights[t]=Math.max(u[t].clientHeight,f);n.row.style.height=n.heights[i.selectedEntityIndex]+"px"}},n.prototype.nextItem=function(){var n=this;n.selectedEntityIndex<n.numEntities-1&&(n.selectElement.selectedIndex=n.selectedEntityIndex+1,this.selectionChanged())},n.prototype.previousItem=function(){var n=this,t;n.selectedEntityIndex>0&&(t=n.selectedEntityIndex-1,n.selectElement.selectedIndex=t,this.selectionChanged())},n.prototype.adjustButtons=function(){var n=this;n.previousButton&&(n.selectedEntityIndex==0?n.previousButton.classList.add("b_hide"):n.previousButton.classList.remove("b_hide"));n.nextButton&&(n.selectedEntityIndex==n.numEntities-1?n.nextButton.classList.add("b_hide"):n.nextButton.classList.remove("b_hide"))},n.prototype.selectionChanged=function(){var n=this,t,e,o,i,u,f;if(n.selectedEntityIndex!==n.selectElement.selectedIndex){for(t=n.selectedEntityIndex,n.selectedEntityIndex=n.selectElement.selectedIndex,e="ent"+t.toString(),n.parentElement.classList.remove(e),o="ent"+n.selectedEntityIndex.toString(),n.parentElement.classList.add(o),this.adjustButtons(),i=0;i<n.facts.length;i++)n.facts[i].row.style.height=n.facts[i].heights[n.selectedEntityIndex]+"px";var r={PrevIndex:t,NewIndex:n.selectedEntityIndex},s=n.dataK[n.selectedEntityIndex],h=n.dataAppNs[n.selectedEntityIndex];s!=""&&h!=""&&(r.NewAppNS=h,r.NewK=s);u=n.dataK[t];f=n.dataAppNs[t];u!=""&&f!=""&&(r.PrevAppNS=f,r.PrevK=u);Log.Log("InteractionEvent","Codex","CompareChanged",!1,"Namespace","KCV2","EventType","CompareChanged","CustomData",JSON.stringify(r))}},n.prototype.GetAndWipeAttribute=function(n,t){if(!n)return null;var i=n.getAttribute(t);return i&&n.removeAttribute(t),i},n}();n.init=u;sj_evt.fire("entityCompare_init",n)})(EntityCompareComponent||(EntityCompareComponent={}))