(function(){try{(function(){var n={L_Fdbk_Submit:"Send feedback",L_Fdbk_GeneralCardInputHeader:"Share your likes, dislikes and suggestions about Bing Maps here…",L_Fdbk_GeneralCardTextWatermark:"To protect your privacy, don't include any personal information.",L_Fdbk_Exit:"Previous Version",L_Fdbk_Reminder:"Let us know what you think about Bing Maps.",L_Fdbk_Link:"Feedback",L_Fdbk_DlgHdr:"Help us improve this site by rating your experience and sharing your comments.",L_Fdbk_EmailWatermark:"Allows us to follow-up with you, if needed.",L_Fdbk_Comments:"Tell us more about your experience.",L_Fdbk_Other:"Something else",L_Fdbk_Email:"Email (optional)",L_Fdbk_PrivacyPolicyLink:"See our Privacy Policy",L_Fdbk_Business_More_Details:"Tell us more about the business",L_Fdbk_MapIssueDescription:"Tell us more about the problem",L_Fdbk_Problem:"Tell us the problem area",L_Fdbk_SubProblem:"Tell us the specific issue",L_Fdbk_AddressZipIncorrect:"Postal code is incorrect",L_Fdbk_AddressMissing:"Address is missing from road",L_Fdbk_AddressLocationIncorrect:"Address is in the wrong location",L_Fdbk_AddressSideIncorrect:"Address is on the wrong side of the road",L_Fdbk_AddressZipMissing:"Postal code is missing",L_Fdbk_AdminDistrictsCountryBoundary:"The boundary between countries/regions is incorrect",L_Fdbk_AdminDistrictsCountryName:"Country/Region has incorrect or missing name",L_Fdbk_AdminDistrictsCountyBoundary:"County boundaries incorrect.",L_Fdbk_AdminDistrictsCountyName:"County has missing or incorrect name",L_Fdbk_AdminDistrictsEntityMissing:"A political entity is missing (country/region, state/province, county...)",L_Fdbk_AdminDistrictsStateBoundary:"The boundary between states/provinces is incorrect",L_Fdbk_AdminDistrictsStateName:"State/province has incorrect or missing name",L_Fdbk_AdminDistrictsWrongEntity:"Political entity is wrong type",L_Fdbk_AirportIncorrect:"Airport is missing",L_Fdbk_AirportMissing:"Airport has incorrect or missing name",L_Fdbk_nameIncorrect:"Name is incorrect",L_Fdbk_MarkIncorrect:"Mark Incorrect",L_Fdbk_locationIncorrect:"Location is incorrect",L_Fdbk_AddressOfLocationIncorrect:"Address of this location is incorrect.",L_Fdbk_AirportWrongLocation:"Airport is in the wrong location",L_Fdbk_BridgeClosed:"Bridge is closed",L_Fdbk_BridgeMissing:"Bridge is missing",L_Fdbk_BridgeNameIncorrect:"Bridge name is incorrect or missing",L_Fdbk_BridgeRemoved:"Bridge needs to be removed",L_Fdbk_BridgeLocationIncorrect:"Bridge is in the wrong location",L_Fdbk_CityLocationIncorrect:"City location is incorrect",L_Fdbk_CityMissing:"City is missing",L_Fdbk_CityNameIncorrect:"City name is incorrect",L_Fdbk_CityNeighborhood:"City should be neighborhood",L_Fdbk_LandFeatureMissing:"Land feature is missing",L_Fdbk_LandFeatureNameIncorrect:"Name of land feature is incorrect",L_Fdbk_LandLocationIncorrect:"Land feature is in the wrong location",L_Fdbk_LandTypeIncorrect:"Land feature is the wrong type (eg: forest should be desert)",L_Fdbk_NeighborhoodCity:"Neighborhood should be city",L_Fdbk_NeighborhoodLocationIncorrect:"Neighborhood location is incorrect",L_Fdbk_NeighborhoodMissing:"Neighborhood is missing",L_Fdbk_NeighborhoodNameIncorrect:"Neighborhood name is incorrect",L_Fdbk_ProblemAddress:"Address",L_Fdbk_ProblemAdministrativeDistricts:"Country/Region/County",L_Fdbk_ProblemAirport:"Airport",L_Fdbk_ProblemBridge:"Bridge",L_Fdbk_ProblemCity:"City",L_Fdbk_ProblemLand:"Landform",L_Fdbk_ProblemNeighborhood:"Neighborhood",L_Fdbk_ProblemRoad:"Roads",L_Fdbk_ProblemWater:"Waterbody",L_Fdbk_ProblemImagery:"Imagery",L_Fdbk_ImageryOutOfDate:"Imagery is out of date",L_Fdbk_ImageryBlurry:"Imagery is cloudy or blurry",ImageryTooDark:"Imagery too dark",ImageryOverexposed:"Imagery overexposed",L_Fdbk_ImageryRoadMismatch:"Imagery and roads don't match",L_Fdbk_RoadClosed:"Road is closed",L_Fdbk_RoadLocationIncorrect:"Road location is incorrect",L_Fdbk_RoadMissing:"Road is missing",L_Fdbk_RoadNameIncorrect:"Road name is incorrect or missing",L_Fdbk_RoadOneWay:"Road should be one way",L_Fdbk_RoadOneWayOpposite:"Road is one way in the wrong directions",L_Fdbk_RoadRemove:"Road needs to be removed",L_Fdbk_RoadTwoWay:"Road should be two way",L_Fdbk_RoadTypeIncorrect:"Road type is incorrect (highway vs street)",L_Fdbk_WaterLocationIncorrect:"Waterbody is in the incorrect location",L_Fdbk_WaterNameIncorrect:"Waterbody has incorrect name",L_Fdbk_WaterTypeIncorrect:"Incorrect type of Waterbody (eg: ocean should be sea)",L_Fdbk_WaterMissing:"Waterbody is missing",L_Fdbk_None:"None",L_Fdbk_SelectProblem:"Select ...",L_Fdbk_ReportAProblem:"Report a map problem",L_Fdbk_GeneralFeedback:"Tell us what you think",L_Fdbk_ActiveCard:"Problem with {0}",L_Fdbk_DescribeProblem:"Describe the problem here",L_Fdbk_ShowOnMap:"Click on the map to place a pushpin on the problem area (Zoom by double-clicking)",L_Fdbk_Hdr:"Help us understand any problems you noticed with the map.",L_Fdbk_SelectSubProblem:"Select ...",L_Fdbk_SpecificMapIssue:"Did you encounter a specific problem on the map?",L_Fdbk_ReportAProblemOnMap:"Click here to report",L_Fdbk_NotProblemOnMap:"Not a problem on the map?",L_Fdbk_SendGeneralFeedback:"Tell us what you think",L_Fdbk_ReportSomethingElse:"Report something else",L_Fdbk_ReportAProblemOnSearchResult:"Report a Problem",L_Fdbk_HelpUsUnderstand:"Help us understand more about the problem.",L_Fdbk_Option_DidNotFind:"I was not looking for {0}",L_Fdbk_Option_IssueWithSearchResult:"Issue with {0}",L_Fdbk_SpecificIssueWith:"Tell us the specific issue with {0}",L_Fdbk_MovePinToCorrect_Message:"Drag the pushpin on the map to the correct location.",L_Fdbk_MovePinToCorrect_Message_For_Missing_Entity:"Drag the map pushpin to the business location.",L_Fdbk_DidNotFindLookingFor_Message:"What were you looking for?",L_Fdbk_TellUsAboutMissingBusiness_Message:"Enter business details",L_Fdbk_AddMissingBusinessCardTitle:"Add missing business",L_Fdbk_WhenISearch_Message:"When I searched for {0}, I was looking for",L_Fdbk_IfYouKnow_Message:"Drag the pushpin on the map to the correct location.",L_Fdbk_DontKnowWhere:"I don't know where this place is.",L_Fdbk_Pin_Not_Move_Reminder:"You have not yet moved the pushpin on the map to the correct location. Please move the pushpin to the location mentioned in your description.",L_Fdbk_Overall_Experience:"How was your overall experience?",L_Fdbk_Overall_Happy:"Happy",L_Fdbk_Overall_Unhappy:"Unhappy",L_Fdbk_Send:"Send",L_Fdbk_Submit_Text:"Submit",L_Fdbk_SubmitAnyway_Text:"Submit Anyway",L_Fdbk_Edit:"Edit",L_Fdbk_BackToEdit_Text:"Back To Edit",L_Fdbk_Dismiss_Text:"Dismiss",L_Fdbk_Dismiss:"Dismiss",L_Fdbk_Done:"Done",L_Fdbk_Next:"Next",L_Fdbk_ReturnToSearchResult:"return to search result",L_Fdbk_Back:"Back",L_Fdbk_NoFoundSelect:"Select...",L_Fdbk_NoFoundAddress:"An address",L_Fdbk_NoFoundBusiness:"A business",L_Fdbk_NoFoundPopulatedPlace:"A populated place (city, neighborhood, country/region, postcode, etc.)",L_Fdbk_NoFoundPopulatedOther:"Something else",L_Fdbk_Pushpin_Message:"Drag the pushpin on the map to describe the problem (if necessary).",L_Fdbk_ClickAgain_Message:"Click again to adjust your selection (if necessary).",L_Fdbk_ThankYou:"Thank you for submitting feedback!",L_Fdbk_ProblemType_Reminder:"Please select a problem type.",L_Fdbk_ProblemArea_Reminder:"Please select a problem area.",L_Fdbk_Pushpin_Reminder:"You have not yet moved the pushpin on the map to the problem area. Please move the pushpin to the location mentioned in your description.",L_Fdbk_Require_Alias_Reminder:"Please fill in employee alias.",L_Fdbk_GeneralFeedback_Reminder:"You have not filled out the feedback form. Please give us more information.",L_Fdbk_BusinessNotFound_RequiredFields_Missing_ErrorMessage:"Enter all the required fields",L_Fdbk_BusinessNotFound_PushpinNotMoved_ErrorMessage:"Move the pushpin on the map to the correct location",L_Fdbk_ReportAProblemOnMap_Reminder:"Please complete all required fields.",L_Fdbk_ReportAProblemOnMap_Required:"Required field",L_Fdbk_ReportNoFound_Required:"Required",L_Fdbk_ReportAProblemOnMap_RequiredSign:"*",L_Fdbk_Drag_Pin_Tip:"Drag to the location of the problem",L_Fdbk_Business_Name:"Name",L_Fdbk_Business_Name_Placeholder_Text:"Business Name",L_Fdbk_Business_Name_With_RequiredSign:"*Business Name",L_Fdbk_Business_Name_Required_Error_Message:"Enter Business Name",L_Fdbk_Business_Address:"Address",L_Fdbk_Business_Address_Required_Error_Message:"Enter Addressline / Street / Locality",L_Fdbk_Business_City_Required_Error_Message:"Enter City",L_Fdbk_Business_City:"City",L_Fdbk_Business_City_With_RequiredSign:"*City",L_Fdbk_Business_State:"State or Province",L_Fdbk_Business_State_PostalCode_Label:"State & Zip",L_Fdbk_Business_PostalCode:"Postal Code",L_Fdbk_Business_Phone:"Phone",L_Fdbk_Business_Website:"Website",L_Fdbk_Business_Closed:"Closed or doesn't exist",L_Fdbk_Business_NameIs:"{0} is:",L_Fdbk_Business_DetailsIncorrect:"Details Incorrect",L_Fdbk_Business_MarkIncorrect:"Details incorrect",L_Fdbk_Optional:"Optional",L_Fdbk_UserComments:"Comments",L_Fdbk_Business_Contact:"Phone",L_Fdbk_Business_PermanentlyClosed:"Permanently Closed",L_Fdbk_Business_DosentExist:"Doesn’t Exist",L_Fdbk_Business_Private:"Private",L_Fdbk_Business_Duplicate:"Duplicate",L_Fdbk_Business_Spam:"Spam",L_Fdbk_Provide_More_Feedback:"Additional details (Phone and Website)",L_Fdbk_New_ThankYou:"Thank you!",L_Fdbk_Bing_Better:"Your feedback helps make Bing better!",L_Fdbk_Map_Location:"Map Location",L_Fdbk_Add_Entity:"Are you trying to add a missing business?",L_Fdbk_Move_Pushpin:"Move Pushpin",L_Fdbk_UserComments_Alt:"Please provide additional details that can help us verify the business.",L_Menu_SuggestAnEdit_Link_Text:"Suggest an edit",L_Tooltip_Expand_Text:"Expand",L_Tooltip_Collapse_Text:"Collapse",L_Tooltip_Undo_Text:"Undo",L_Fdbk_Not_Avaliable:"Not Available",L_Fdbk_WrongDirections:"Wrong directions",L_Fdbk_LocationInDirectionsIncorrect:"{0} is in the wrong location",L_Fdbk_WhichStepIsWrong:"Which step is wrong?",L_Fdbk_AddStep:"Add step",L_Fdbk_BetterRoute:"I know of a better route that is not shown",L_Fdbk_IncorrectTimesTransit:"Incorrect times for transit services",L_Fdbk_IncorrectLocationTransitStop:"Incorrect location of a transit stop",L_Tooltip_Close_Text:"Close",L_Fdbk_Business_HoursOfOperation:"Hours of Operations",L_Fdbk_Select_Issue_Message:"Please click on the problem area.",MarkIncorrect:"Mark Incorrect",AddHours:"Add hours",WhichDays:"Which days?",DayFriday:"Friday",DayFridayShort:"Fri",DayMonday:"Monday",DayMondayShort:"Mon",DaySaturday:"Saturday",DaySaturdayShort:"Sat",DaySunday:"Sunday",DaySundayShort:"Sun",DayThursday:"Thursday",DayThursdayShort:"Thu",DayTuesday:"Tuesday",DayTuesdayShort:"Tue",DayWednesday:"Wednesday",DayWednesdayShort:"Wed",ErrorIncorrectHours:"Close time can't be less than open time",ErrorMissingHours:"Add some hours",ErrorSelectDays:"Select which days",AddMoreHours:"Add more hours",ButtonUpdate:"Update",Open24x7:"Open 24 x 7",ButtonCancel:"Cancel",ButtonAdd:"Add",SendEmail:"Email me about my changes",DidYouMean:"Did you mean?",DidYouMeanThisPlace:"Wait, did you mean this place?",SimilarBusinessOnBing:"We found similar business on Bing!",L_FdbkEditButtonLabel:"Click to edit {0}",FdbkTeolinOptOutLabel:"Map data transition information",FdbkBusinessOwner:"Are you the business owner?",FdbkBingPlacesText:"If so, manage your business listing on {0}",FdbkBingPlacesLink:"Bing Places",FdbkAddressErrorWithPin:"Please complete all required fields, and drag the pushpin to the location of the issue on the map.",FdbkGeneralAddressReminder:"You have not filled out the feedback form. Please give us more information including dragging the pushpin to the location of the issue on the map.",FdbkPinToolTip:"Drag the pushpin to the location of the issue on the map",FdbkNumberAndStreetGhost:"Street Name, Number",FdbkStreetGhost:"Street Name",FdbkStreetLabel:"Street address",FdbkPostcodeLabel:"Postal code",FdbkTitleMobile:"Thanks for taking the time to send us feedback!",FdbkMainSelectionLabel:"Select the problem area",FdbkMoreInfoLabel:"Give us a little more information",FdbkAreaDirections:"Directions",FdbkAreaRealEstate:"Issue with listing for {0}",FdbkAreaMap:"The map",FdbkAddYourBusiness:"Add your business to {0}",FdbkProblemMyPlaces:"My Places",FdbkSubProbCollections:"Collections",FdbkSubProbFavorites:"Favorites",FdbkSubProbHomeWork:"Home or Work",FdbkSubProbItineraries:"Itineraries",FdbkSubProbMissingMyPlaces:"I don't see any of my saved places",FdbkProblemAccessibility:"Accessibility and Performance",FdbkProblemLocalGuide:"Local Guide",FdbkProblemMeasure:"Measure distance",FdbkProblemContributions:"My Contributions",FdbkManageContribution:"Manage {0}",FdbkProblemPrintShare:"Print or Share",FdbkProblemWrongLang:"Wrong language",FdbkProblemMapDisplay:"Map displaying incorrectly (overlapping, all white, etc)",FdbkProblemAerialBE:"Aerial or Birds Eye",FdbkProblemZoom:"Zoom",FdbkSubProbPolitic:"A political entity is missing or incorrect (country/region, state/province, county etc.)",FdbkSubProbBoundaryVisible:"The boundary between countries, states, provinces, or counties is hard to see",FdbkSubProbBoundaryIncorrect:"The boundary between countries, states, province, or county is incorrect",FdbkNotMyLocale:"My location is incorrect",fdbkOther:"Other",FdbkSelectArea:"Select ...",FdbkDirectionIncorrect:"Directions are incorrect or could be better",FdbkProblemFlyover:"City Flyover",FdbkProblemRoadView:"Road View or Dark Mode View",FdbkProblemLookBusiness:"I was looking for a business",FdbkProblemLookPlace:"I was looking for a populated place (city, neighborhood, country/region, postcode, etc.)",FdbkProblemLookAddress:"I was looking for an address",FdbkRouteTime:"Route time is incorrect",FdbkProblemTraffic:"Traffic",FdbkDirectionRoadClose:"Road closure missing",FdbkAddMissingBusinessTitle:"Add missing business",FdbkLandmarks:"Landmark on Map",FdbkSubProblemError:"Please select a specific issue.",FdbkProblemError:"Please tell us a little more information.",PrintAndMore:"Print, My Places, and more",StreetsideMapStyle:"Streetside ®",ReportAProblem:"Report a privacy concern with this image",ReportAProblemInstruction:'To report a privacy concern, make sure you are already in the Streetside ® view and then select the "Report a privacy concern with this image" button from within that map view. This helps us identify exactly what view in Streetside you are reporting a concern about.',ReturnToDirections:"Return to directions",TerrainProblemType:"Terrain",StreetsideFeedbackTitle:"{0} {1}"};window.$MicrosoftMaps8.ResourceManager?window.$MicrosoftMaps8.ResourceManager.init("Feedbacks",n):window.$MicrosoftMaps8.ResourcesObject=n})();var r=window.$MicrosoftMaps8,e=r.Internal,rt=e.TaskData,at=r.Anchor,nr=e._BaseMapTemplateSelector,vt=e.BaseTask,st=e.BaseTaskViewModel,tr=r.BitmapImageTemplate,yt=e.Control,pt=e.ControlTemplate,y=r.DataHandlerKeys,ht=e._Debug,wt=r.DefaultTemplateSelector,b=rt.DirectionsMode,bt=rt.DistanceUnit,kt=e._EntryPoints,f=e._FeatureNames,u=r.GlobalConfig.features.feedback,ir=e.GeolocationProvider,i=e._Gimme,c=r.GlobalConfig,p=r.GlobalDataEventHandler,a=e._Helper,dt=r.ImageFromCssHelper,k=e._JSEvent,gt=r.CommonControls.ListDropdownViewModel,rr=r.LocalSearchEntity,ur=e._LocalStorageCache,fr=e._MapAuthentication,ni=e.MapInteractionBehavior,s=e.MapHelper,g=r.Location,ti=r.MapsFeedback,d=r.MapTypeId,er=r.MapView,or=r.CommonControls.ModalDialogViewModel,ii=r.MoveableSimplePointPrimitive,ut=e._Network,ri=e._ObservableObject,nt=e._ObservableCollection,ui=e._OverlayEntity,fi=e._Overlay,ei=r.Point,oi=r.CommonControls.PopOutButtonViewModel,sr=e.Permalink,hr=r.PrimitiveOverlayHelper,n=r.ResourceManager.Feedbacks,cr=e.ReverseGeocoder,lr=r.SimplePointPrimitive,ar=e._TaskDataHandlerHelper,ct=r.ResourceManager.TaskFramework,w=r.TaskTypes,ft=rt.TimeTypes,si=r.VectorMapLayer,vr=r.ZoomLevel,hi='<div class="bm_flexWrapper" data-tag="Feedback.Links.Container">    <div class="bm_feedbackBetaButton" data-tag="Feedback.Button">        <a class="bm_feedbackBetaButtonLink" event:click="onFeedbackClick" event:keydown="onKeydown" event:mouseover="onMouseOver" event:mouseout="onMouseOut" event:mousemove="onMouseMove" href="#" id="mapsFeedback" aria-label="{TemplateBinding resources.L_Fdbk_Reminder}" role="button" data-tag="Feedback.Links.MapFeedback" aria-expanded="false" aria-haspopup="true" aria-controls="feedbackPopOut">            <div class="bm_feedbackButtonContentContainer">                <div id="bm_feedbackBetaButtonIcon"><\/div>                <div id="bm_feedbackBetaButtonText">                    <TextBlock Text="{TemplateBinding resources.L_Fdbk_Link}" />                <\/div>            <\/div>        <\/a>    <\/div><\/div>',ci='<div class="bm_feedbackDragOverlay" data-events-for="ms-composite">    <div class="feedbackDragPin" data-events-for="ms-composite" style:visibility="{Binding ShowPin Converter=boolToVisibility}"><\/div>    <div class="feedbackDragPinMessage" style:visibility="{Binding ShowTip Converter=boolToVisibility}">        <TextBlock Text="{Binding dragPinTip}"/>    <\/div><\/div>',li='<div class="feedbackPanelRoot">    <div class="feedbackPanel">        <div style:display="{Binding showSuggestions Converter=boolToDisplay}" class="meautosuggesttext">            <div>                <span class="feedbackDidYouMeanText">                    <TextBlock Text="{Binding resources.DidYouMeanThisPlace}" />                <\/span>            <\/div>            <div>                <span class="similarBusinessOnBingText">                    <TextBlock Text="{Binding resources.SimilarBusinessOnBing}" />                <\/span>            <\/div>        <\/div>        <textarea class="dummyfocus" style:display="none" tabindex="-1"><\/textarea>        <div class="me-overlay-listings" style:display="{Binding showSuggestions Converter=boolToDisplay}">            <div class="me-entity-listing-container">                <div class="me-b_rich">                    <ul class="me-b_vList"><\/ul>                <\/div>            <\/div>        <\/div>        <div class="feedbackDivPanel" data-tag="reportMissingEntityPanel" style:display="{Binding showFeedbackForm Converter=boolToDisplay}">            <div class="feedbackLookingforSelection meFeedback" data-tag="feedbackLookingforSelection">                <div class="requireMessage meFeedback">                    <span class="requireSign">                        <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                    <\/span>                    <span class="requireLabel">                        <TextBlock Text="{Binding resources.L_Fdbk_ReportNoFound_Required}" />                    <\/span>                <\/div>                <div class="feedbackCardLabel">                    <span class="businessOwnerText">                        <TextBlock Text="{Binding resources.FdbkBusinessOwner}" />                    <\/span>                    <span class="businessOwnerLink"><\/span>                <\/div>                <div class="feedbackBusinessDiv meFeedback" data-tag="feedbackBusinessDiv">                    <div class="inputFieldBlock name">                        <label><TextBlock Text="{Binding resources.L_Fdbk_Business_Name}" /><\/label>                        <span class="requireSign">*<\/span>                        <input type="text" class="mefbBusinessName" placeholder="{Binding resources.L_Fdbk_Business_Name_Placeholder_Text}" value="{Binding businessName Mode=TwoWay}" event:blur="onBlurFBRequiredInputFieldName" maxlength="400" data-tag="fbBusinessName" />                    <\/div>                    <div class="validationErrorMessage">                        <TextBlock Text="{Binding resources.L_Fdbk_Business_Name_Required_Error_Message}" />                    <\/div>                    <div class="inputFieldBlock address">                        <label><TextBlock Text="{Binding resources.L_Fdbk_Business_Address}" /><\/label>                        <span class="requireSign">*<\/span>                        <input type="text" class="fbBusinessAddress" placeholder="{Binding resources.L_Fdbk_Business_Address}" value="{Binding businessAddress Mode=TwoWay}" event:blur="onBlurFBRequiredInputFieldAddress" maxlength="400" data-tag="fbBusinessAddress" />                    <\/div>                    <div class="validationErrorMessage">                        <TextBlock Text="{Binding resources.L_Fdbk_Business_Address_Required_Error_Message}" />                    <\/div>                    <div class="inputFieldBlock city">                        <label><TextBlock Text="{Binding resources.L_Fdbk_Business_City}" /><\/label>                        <span class="requireSign">*<\/span>                        <input type="text" class="mefbBusinessCity" placeholder="{Binding resources.L_Fdbk_Business_City}" value="{Binding businessCity Mode=TwoWay}" event:blur="onBlurFBRequiredInputFieldAddress" maxlength="400" data-tag="fbBusinessCity" />                    <\/div>                    <div class="validationErrorMessage">                        <TextBlock Text="{Binding resources.L_Fdbk_Business_City_Required_Error_Message}" />                    <\/div>                    <div class="inputFieldBlock">                        <label><TextBlock Text="{Binding resources.L_Fdbk_Business_State_PostalCode_Label}" /><\/label>                        <input type="text" class="mefbBusinessState" placeholder="{Binding resources.L_Fdbk_Business_State}" value="{Binding businessState Mode=TwoWay}" event:blur="onBlurFBRequiredInputFieldAddress" maxlength="400" data-tag="fbBusinessState" />                        <input type="text" class="mefbBusinessPostalCode" placeholder="{Binding resources.L_Fdbk_Business_PostalCode}" value="{Binding businessPostalCode Mode=TwoWay}" event:blur="onBlurFBRequiredInputFieldAddress" maxlength="400" data-tag="fbBusinessPostalCode" />                    <\/div>                    <div class="feedbackCardInputDiv meFeedback inputFieldBlock feedbackCardText" data-tag="commentsSearchResultNotFoundDiv">                        <label><TextBlock Text="{Binding resources.L_Fdbk_UserComments}" /><\/label>                        <textarea class="feedbackComments" rows="3" placeholder="{Binding resources.L_Fdbk_Business_More_Details}" value="{Binding commentsSearchResultNotFound Mode=TwoWay}" maxlength="2000" data-tag="commentsSearchResultNotFound" />                        <br class="clearFloat meFeedback" />                    <\/div>                    <div class="meProvideMoreFeedback">                        <CheckBox Content="{Binding resources.L_Fdbk_Provide_More_Feedback}" Checked="{Binding showAllFields Mode=TwoWay}" Value="" />                    <\/div>                    <div class="inputFieldBlock" style:display="{Binding showAllFields Converter=boolToDisplay}">                        <label><TextBlock Text="{Binding resources.L_Fdbk_Business_Phone}" /><\/label>                        <input type="text" class="mefbBusinessPhone" placeholder="{Binding resources.L_Fdbk_Business_Phone}" value="{Binding businessPhone Mode=TwoWay}" maxlength="400" data-tag="fbBusinessPhone" />                    <\/div>                    <div class="inputFieldBlock" style:display="{Binding showAllFields Converter=boolToDisplay}">                        <label><TextBlock Text="{Binding resources.L_Fdbk_Business_Website}" /><\/label>                        <input type="text" class="mefbBusinessWebsite" placeholder="{Binding resources.L_Fdbk_Business_Website}" value="{Binding businessWebsite Mode=TwoWay}" maxlength="400" data-tag="fbBusinessWebsite" />                    <\/div>                <\/div>            <\/div>            <div class="{Binding showDragPushPinErrorMessage Converter=boolToDragPinMessageClass}" data-tag="movePushpinMessage">                <span>                    <TextBlock Text="{Binding resources.L_Fdbk_MovePinToCorrect_Message_For_Missing_Entity}" />                <\/span>            <\/div>            <div class="feedbackCardSearchResultButton meFeedback" data-tag="submitButtonDiv">                <a class="textButton meSendButton" title="{Binding resources.L_Fdbk_Send}" event:click="onMeFeedbackSubmitClick" href="#" role="button" data-tag="resultFeedbackNoFoundSendButton">                    <TextBlock Text="{Binding resources.L_Fdbk_Submit_Text}" />                <\/a>            <\/div>        <\/div>        <div class="feedbackCardSearchResultButton meFeedbackEditSubmit" data-tag="editSubmitAnywayButtonDiv" style:display="{Binding showSuggestions Converter=boolToDisplay}">            <div>                <a class="textButtonme meBacktoEditButton" title="{Binding resources.L_Fdbk_Edit}" event:click="onMeFeedbackBackToEditClick" href="#" role="button" data-tag="resultFeedbackBacktoEditButton" style:display="{Binding showBackToEditButton Converter=boolToDisplay}">                    <TextBlock Text="{Binding resources.L_Fdbk_BackToEdit_Text}" />                <\/a>                <a class="textButtonme meBacktoEditButton" title="{Binding resources.L_Fdbk_Dismiss}" event:click="onMeFeedbackBackToEditClick" href="#" role="button" data-tag="resultFeedbackDismissButton" style:display="{Binding showBackToEditButton Converter=boolToNotDisplay}">                    <TextBlock Text="{Binding resources.L_Fdbk_Dismiss_Text}" />                <\/a>                <a class="textButton meSubmitAnywayButton" title="{Binding resources.L_Fdbk_Send}" event:click="onMeFeedbackSubmitAnywayClick" href="#" role="button" data-tag="resultFeedbackSubmitAnywayButton">                    <TextBlock Text="{Binding resources.L_Fdbk_SubmitAnyway_Text}" />                <\/a>            <\/div>        <\/div>        <div class="thankYouPanel meFeedback" style:display="{Binding showThankYouPanel Converter=boolToDisplay}" role="status" aria-expanded="{Binding showThankYouPanel}" data-tag="searchResulThankYouPanel">            <div style="font-size:15px;" id="ms_ThankYou">                <TextBlock Text="{Binding resources.L_Fdbk_New_ThankYou}" />            <\/div>            <div style="font-size:15px;padding-top:10px" id="ms_ThankYouMessage">                <TextBlock Text="{Binding resources.L_Fdbk_Bing_Better}" />            <\/div>        <\/div>    <\/div><\/div>',ai='<div class="feedbackPanelRoot">    <div class="feedbackPanel">        <div class="feedbackHeader" style:display="{Binding showFeedbackHeader Converter=boolToDisplay}">            <div class="feedbackTitle" role="heading" aria-level="2">                <TextBlock Text="{Binding resources.L_Fdbk_GeneralFeedback}" />            <\/div>            <a href="#" class="feedbackPanelClose" title="{Binding resources.L_CloseTask_Text}" role="button" event:click="onFeedbackDoneClick">                <div class="icon"><\/div>            <\/a>        <\/div>        <div class="feedbackDivPanel" style:display="{Binding showGeneralFeedbackPanel Converter=boolToDisplay}" data-tag="generalFeedbackPanel">            <div class="generalFeedbackOverall">                <div class="feedbackCardLabel">                    <TextBlock Text="{Binding resources.L_Fdbk_Overall_Experience}" />                <\/div>                <div class="overallSelections">                    <a class="happyButton" title="{Binding resources.L_Fdbk_Overall_Happy}" href="#" event:click="onOverallHappyButtonClick" data-tag="overallFeedbackHappyButton" role="button" aria-pressed="{Binding happySelected}" event:focus="onClearError">                    <\/a>                    <a class="unhappyButton" title="{Binding resources.L_Fdbk_Overall_Unhappy}" href="#" event:click="onOverallUnhappyButtonClick" data-tag="overallFeedbackUnhappyButton" role="button" aria-pressed="{Binding unHappySelected}" event:focus="onClearError">                    <\/a>                <\/div>            <\/div>            <div class="feedbackCardInputDiv" data-tag="commentsGeneralDiv">                <div class="feedbackCardLabel" id="feedbackCardCommentsLabel">                    <TextBlock Text="{Binding newFeedbackInputHeader}" />                <\/div>                <div class="feedbackCardText">                    <textarea class="feedbackComments" rows="6" placeholder="{Binding newFeedbackTextWatermark}" value="{Binding commentsGeneral Mode=TwoWay}" maxlength="2000" data-tag="commentsGeneral" aria-labelledby="feedbackCardCommentsLabel" event:focus="onClearError" />                <\/div>            <\/div>            <div class="feedbackCardInputDiv" style:display="{Binding emailDisplay}" data-tag="emailDiv">                <div class="feedbackCardLabel" id="feedbackCardEmailLabel">                    <TextBlock Text="{Binding emailLabel}" />                <\/div>                <div class="feedbackCardText">                    <input type="text" placeholder="{Binding resources.L_Fdbk_EmailWatermark}" value="{Binding email Mode=TwoWay}" maxlength="400" data-tag="email" aria-labelledby="feedbackCardEmailLabel" />                <\/div>                <a href="{Binding privacyPolicyLink}" target="_blank" class="privacyPolicyLink" style:display="{Binding privacyPolicyLinkDisplay}" role="link">                    <TextBlock Text="{Binding resources.L_Fdbk_PrivacyPolicyLink}" />                <\/a>            <\/div>            <div class="feedbackCardLink" data-tag="reportAProblemOnMapLinkDiv" style:display="{Binding isMobile Converter=boolToNotDisplay}">                <div class="feedbackCardLabel" id="fdbkCardMapIssueLabel">                    <TextBlock Text="{Binding resources.L_Fdbk_SpecificMapIssue}" />                <\/div>                <a href="#" class="reportProblemOnMapLink" role="button" event:click="onReportAProblemOnMapClick" data-tag="reportAProblemOnMapLink" aria-labelledby="fdbkCardMapIssueLabel">                    <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap}" />                <\/a>            <\/div>            <div class="feedbackCardFoot">                <a class="textButton closeButton" title="{Binding resources.L_Fdbk_Done}" event:click="onFeedbackDoneClick" href="#" role="button" tabindex="0" data-tag="feedbackDoneButton" style:display="{Binding isMobile Converter=boolToDisplay}">                    <TextBlock Text="{Binding resources.L_Fdbk_Done}" />                <\/a>                <a class="textButton" title="{Binding resources.L_Fdbk_Send}" event:click="onGeneralFeedbackSendClick" href="#" role="button" data-tag="generalFeedbackSendButton">                    <TextBlock Text="{Binding resources.L_Fdbk_Send}" />                <\/a>            <\/div>        <\/div>        <div class="feedbackDivPanel" style:display="{Binding showProblemOnMapPanel Converter=boolToDisplay}" data-tag="problemOnMapPanel">            <div class="pushpinMessage">                <TextBlock Text="{Binding resources.L_Fdbk_Pushpin_Message}" />            <\/div>            <div class="feedbackCardInputDiv problemSelect" data-tag="problemTypesDropDownDiv">                <div class="feedbackCardLabel">                    <TextBlock Text="{Binding resources.L_Fdbk_Problem}" />                    <span class="requireSign">                        <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                    <\/span>                <\/div>                <div class="feedbackSelect" data-tag="problemTypesDropDown" event:click="onClearError">                    <SelectControl ItemsSource="{Binding problemTypes}" SelectedItem="{Binding problemType Mode=TwoWay}" event:dropdown="onDropdown" PopOutId="feedbackProblem" />                <\/div>            <\/div>            <div class="feedbackCardInputDiv" data-tag="subProblemTypesDropDownDiv">                <div class="feedbackCardLabel">                    <TextBlock Text="{Binding resources.L_Fdbk_SubProblem}" />                <\/div>                <div class="feedbackSelect" data-tag="subProblemTypesDropDown" event:click="onClearError">                    <SelectControl ItemsSource="{Binding subProblemTypes}" SelectedItem="{Binding subProblemType Mode=TwoWay}" event:dropdown="onDropdown" PopOutId="feedbackSubProblem" />                <\/div>            <\/div>            <div class="feedbackCardInputDiv" data-tag="addressInput" style:display="{Binding showAddressInput Converter=boolToDisplay}">                <div class="feedbackCardLabel" id="feedbackAddressInput">                    <TextBlock Text="{Binding resources.FdbkStreetLabel}" />                    <span class="requireSign">                        <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                    <\/span>                <\/div>                <div class="feedbackCardText">                    <textarea rows="1" class="feedbackAddressInput" placeholder="{Binding addressGhostText}" value="{Binding userAddress Mode=TwoWay}" maxlength="600" data-tag="userAddressInput" aria-labelledby="feedbackAddressInput" event:focus="onClearError" />                <\/div>            <\/div>            <div class="feedbackCardInputDiv" data-tag="postcodeInput" style:display="{Binding showPostcodeInput Converter=boolToDisplay}">                <div class="feedbackCardLabel" id="feedbackPostcodeInput">                    <TextBlock Text="{Binding resources.FdbkPostcodeLabel}" />                <\/div>                <div class="feedbackCardText">                    <textarea rows="1" class="feedbackPostcodeInput" value="{Binding userPostcode Mode=TwoWay}" maxlength="60" data-tag="userPostcodeInput" aria-labelledby="feedbackPostcodeInput" event:focus="onClearError" />                <\/div>            <\/div>            <div class="feedbackCardInputDiv" data-tag="commentsBaseMapDiv">                <div class="feedbackCardLabel" id="feedbackCardIssueLabel">                    <TextBlock Text="{Binding resources.L_Fdbk_MapIssueDescription}" />                    <span class="requireSign">                        <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                    <\/span>                <\/div>                <div class="feedbackCardText">                    <textarea rows="6" class="feedbackDescribeProblem" placeholder="{Binding resources.L_Fdbk_DescribeProblem}" value="{Binding commentsBaseMap Mode=TwoWay}" maxlength="2000" data-tag="commentsBaseMap" aria-labelledby="feedbackCardIssueLabel" event:focus="onClearError" />                <\/div>            <\/div>            <div class="requireMessage">                <span class="requireSign">                    <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                <\/span>                <span class="requireLabel">                    <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_Required}" />                <\/span>            <\/div>            <div class="feedbackCardLink" data-tag="sendGeneralFeedbackLinkDiv">                <div class="feedbackCardLabel">                    <TextBlock Text="{Binding resources.L_Fdbk_NotProblemOnMap}" />                <\/div>                <a href="#" event:click="onSendGeneralFeedbackClick" data-tag="sendGeneralFeedbackLink">                    <TextBlock Text="{Binding resources.L_Fdbk_SendGeneralFeedback}" />                <\/a>            <\/div>            <div class="feedbackCardFoot">                <a class="textButton" title="{Binding resources.L_Fdbk_Send}" event:click="onProblemOnMapSendClick" href="#" role="button" data-tag="problemOnMapSendButton">                    <TextBlock Text="{Binding resources.L_Fdbk_Send}" />                <\/a>            <\/div>        <\/div>        <div class="thankYouPanel" style:display="{Binding showThankYouPanel Converter=boolToDisplay}" role="status" aria-labelledby="thankYouMessageBase" aria-expanded="{Binding showThankYouPanel}" data-tag="thankYouPanel">            <div class="thankYouMessage" id="thankYouMessageBase">                <TextBlock Text="{Binding resources.L_Fdbk_ThankYou}" />            <\/div>            <div class="feedbackCardFoot">                <a class="textButton thankYouPanel" title="{Binding resources.L_Fdbk_Done}" event:click="onFeedbackDoneClick" href="#" role="button" tabindex="0" data-tag="feedbackDoneButton">                    <TextBlock Text="{Binding resources.L_Fdbk_Done}" />                <\/a>            <\/div>        <\/div>        <div class="messagePanel" style:display="{Binding showMessagePanel Converter=boolToDisplay}" role="status" aria-expanded="{Binding showMessagePanel}" data-tag="messagePanel">            <div class="reminderMessage" data-tag="reminderMessage">                <TextBlock Text="{Binding reminderMessage}" />            <\/div>        <\/div>    <\/div><\/div>',vi='<div class="feedbackPanelRoot new">    <div class="feedbackPanel">        <div class="feedbackSlideHeader" style:display="{Binding hideBackButton Converter=boolToDisplay}">            <div class="returnArrowDiv" data-tag="returnArrowDiv">                <a class="commonButton backArrowButton feedbackBackButton" title="{Binding resources.L_Fdbk_ReturnToSearchResult}" event:click="onReturnToSearchResultClick" href="#" role="button" data-tag="returnToSearchResultButton">                    <div class="feedbackBackButtonText">                        <TextBlock Text="{Binding backButtonText}" />                    <\/div>                <\/a>            <\/div>            <div class="feedbackHeaderText">                <TextBlock Text="{Binding resources.L_Fdbk_Link}"/>            <\/div>        <\/div>        <div class="feedbackDivPanel" data-tag="feedbackDivPanel" style:display="{Binding showThankYouPanel Converter=boolToNotDisplay}">            <div class="feedbackCardInputDiv problemAreaSelect" data-tag="areaProblemSelect" style:display="{Binding showRequiredArea Converter=boolToDisplay}">                <div class="feedbackCardLabel">                    <TextBlock Text="{Binding resources.FdbkMainSelectionLabel}" />                    <span class="requireSign">                        <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                    <\/span>                <\/div>                <div class="feedbackSelect" data-tag="areaDropDown" event:click="onClearError">                    <SelectControl ItemsSource="{Binding problemAreas}" SelectedItem="{Binding problemArea Mode=TwoWay}" event:dropdown="onDropdown" PopOutId="feedbackArea" />                <\/div>            <\/div>            <div class="feedbackCardInputDiv problemSelect" data-tag="problemTypesDropDownDiv" style:display="{Binding showProblemTypes Converter=boolToDisplay}">                <div class="feedbackCardLabel">                    <TextBlock Text="{Binding resources.FdbkMoreInfoLabel}" />                    <span class="requireSign">                        <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                    <\/span>                <\/div>                <div class="feedbackSelect" data-tag="problemTypesDropDown" event:click="onClearError">                    <SelectControl ItemsSource="{Binding problemTypes}" SelectedItem="{Binding problemType Mode=TwoWay}" event:dropdown="onDropdown" PopOutId="feedbackProblem" />                <\/div>            <\/div>            <div class="feedbackCardInputDiv" data-tag="subProblemTypesDropDownDiv" style:display="{Binding showSubProblems Converter=boolToDisplay}">                <div class="feedbackCardLabel">                    <TextBlock Text="{Binding resources.L_Fdbk_SubProblem}" />                    <span class="requireSign">                        <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                    <\/span>                <\/div>                <div class="feedbackSelect" data-tag="subProblemTypesDropDown" event:click="onClearError">                    <SelectControl ItemsSource="{Binding subProblemTypes}" SelectedItem="{Binding subProblemType Mode=TwoWay}" event:dropdown="onDropdown" PopOutId="feedbackSubProblem" />                <\/div>            <\/div>            <div class="feedbackCardInputDiv" data-tag="directionsIssueDropDownDiv" style:display="{Binding showDirectionsFeedback Converter=boolToDisplay}">                <div class="feedbackCardLabel">                    <span class="labelDirectionsIssue">                        <TextBlock Text="{Binding resources.FdbkMoreInfoLabel}" />                        <span class="requireSign">                            <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                        <\/span>                    <\/span>                <\/div>                <div class="feedbackSelect" data-tag="directionsIssueDropDown">                    <SelectControl ItemsSource="{Binding directionsIssueTypes}" SelectedItem="{Binding directionsIssueType Mode=TwoWay}" event:dropdown="onDropdown" PopOutId="feedbackDirIssue" />                <\/div>            <\/div>            <div class="feedbackCardInputDiv" data-tag="directionStepsIssueDiv" style:display="{Binding showStepsDiv Converter=boolToDisplay}">                <DraggableList ItemsSource="{Binding steps}">                    <DraggableList.ItemTemplate>                        <DataTemplate>                            <div>                                <div class="feedbackCardInputDiv">                                    <div class="feedbackCardLabel">                                        <span class="labelDirectionsStepIssue">                                            <TextBlock Text="{Binding resources.L_Fdbk_WhichStepIsWrong}" />                                        <\/span>                                    <\/div>                                    <div class="feedbackSelect" data-tag="directionsStepIssueDropDown">                                        <SelectControl ItemsSource="{Binding directionsSteps}" SelectedItem="{Binding directionsIssueStep Mode=TwoWay}" event:dropdown="onDropdown" PopOutId="feedbackDirStep" />                                    <\/div>                                <\/div>                                <div class="feedbackCardInputDiv" data-tag="commentsDirectionStepDiv">                                    <div class="feedbackCardLabel">                                        <TextBlock Text="{Binding resources.L_Fdbk_MapIssueDescription}" />                                    <\/div>                                    <div class="feedbackCardText">                                        <textarea class="stepComments" rows="3" value="{Binding commentsDirectionsStep Mode=TwoWay}" maxlength="2000" />                                    <\/div>                                <\/div>                            <\/div>                        <\/DataTemplate>                    <\/DraggableList.ItemTemplate>                <\/DraggableList>                <a title="{Binding resources.L_Fdbk_AddStep}" class="fbDirStepAdd" href="#" event:click="onAddStepClick" data-tag="fbDirStepAdd">                    <span>                        <TextBlock text="{Binding resources.L_Fdbk_AddStep}" />                    <\/span>                <\/a>            <\/div>            <div class="feedbackCardInputDiv" data-tag="addressInput" style:display="{Binding showAddressInput Converter=boolToDisplay}">                <div class="feedbackCardLabel" id="feedbackAddressInput">                    <TextBlock Text="{Binding resources.FdbkStreetLabel}" />                    <span class="requireSign">                        <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                    <\/span>                <\/div>                <div class="feedbackCardText">                    <textarea rows="1" class="feedbackAddressInput" placeholder="{Binding addressGhostText}" value="{Binding userAddress Mode=TwoWay}" maxlength="600" data-tag="userAddressInput" aria-labelledby="feedbackAddressInput" event:focus="onClearError" />                <\/div>            <\/div>            <div class="feedbackCardInputDiv" data-tag="postcodeInput" style:display="{Binding showPostcodeInput Converter=boolToDisplay}">                <div class="feedbackCardLabel" id="feedbackPostcodeInput">                    <TextBlock Text="{Binding resources.FdbkPostcodeLabel}" />                    <span class="requireSign" style:display="{Binding showPostRequire Converter=boolToDisplay}">                        <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                    <\/span>                <\/div>                <div class="feedbackCardText">                    <textarea rows="1" class="feedbackPostcodeInput" value="{Binding userPostcode Mode=TwoWay}" maxlength="60" data-tag="userPostcodeInput" aria-labelledby="feedbackPostcodeInput" event:focus="onClearError" />                <\/div>            <\/div>            <div class="feedbackCardInputDiv" data-tag="lookingForSelection" style:display="{Binding showLookingforDiv Converter=boolToDisplay}">                <div class="feedbackLookingforSelection" data-tag="feedbackLookingforSelection">                    <div class="feedbackBusinessDiv" data-tag="feedbackBusinessDiv">                        <div class="businessNameContainer">                            <input type="text" class="fbBusinessName" placeholder="{Binding resources.L_Fdbk_Business_Name_Placeholder_Text}" value="{Binding businessName Mode=TwoWay}" event:blur="onBlurFBRequiredInputField" maxlength="400" data-tag="fbBusinessName" event:focus="onClearError" />                            <span class="requireSign"><TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" /><\/span>                        <\/div>                        <input type="text" class="fbBusinessAddress" placeholder="{Binding resources.L_Fdbk_Business_Address}" value="{Binding businessAddress Mode=TwoWay}" maxlength="400" data-tag="fbBusinessAddress" />                        <div class="cityNameContainer">                            <input type="text" class="fbBusinessCity" placeholder="{Binding resources.L_Fdbk_Business_City}" value="{Binding businessCity Mode=TwoWay}" event:blur="onBlurFBRequiredInputField" maxlength="400" data-tag="fbBusinessCity" event:focus="onClearError" />                            <span class="requireSign"><TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" /><\/span>                        <\/div>                        <input type="text" class="fbBusinessState" placeholder="{Binding resources.L_Fdbk_Business_State}" value="{Binding businessState Mode=TwoWay}" maxlength="400" data-tag="fbBusinessState" />                        <input type="text" class="fbBusinessPostalCode" placeholder="{Binding resources.L_Fdbk_Business_PostalCode}" value="{Binding businessPostalCode Mode=TwoWay}" maxlength="400" data-tag="fbBusinessPostalCode" />                        <input type="text" class="fbBusinessPhone" placeholder="{Binding resources.L_Fdbk_Business_Phone}" value="{Binding businessPhone Mode=TwoWay}" maxlength="400" data-tag="fbBusinessPhone" />                        <input type="text" class="fbBusinessWebsite" placeholder="{Binding resources.L_Fdbk_Business_Website}" value="{Binding businessWebsite Mode=TwoWay}" maxlength="400" data-tag="fbBusinessWebsite" />                    <\/div>                <\/div>            <\/div>            <div class="feedbackCardMovePinReminderDiv" style:display="{Binding showMovePushpinMessage Converter=boolToDisplay}" data-tag="movePushpinMessage">                <span>                    <TextBlock Text="{Binding resources.L_Fdbk_MovePinToCorrect_Message}" />                <\/span>                <span class="requireSign" style:display="{Binding showRequirePinMoveSign Converter=boolToDisplay}">                    <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                <\/span>            <\/div>            <div class="feedbackCardInputDiv" data-tag="commentsBaseMapDiv" style:display="{Binding showCommentsDiv Converter=boolToDisplay}">                <div class="feedbackCardLabel" id="feedbackCommentLabel">                    <TextBlock Text="{Binding resources.L_Fdbk_MapIssueDescription}" />                    <span class="requireSign" style:display="{Binding showRequireComments Converter=boolToDisplay}">                        <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                    <\/span>                <\/div>                <div class="feedbackCardText">                    <textarea rows="6" class="feedbackDescribeProblem" placeholder="{Binding resources.L_Fdbk_DescribeProblem}" value="{Binding commentsFeedback Mode=TwoWay}" maxlength="2000" data-tag="commentsBaseMap" aria-labelledby="feedbackCardIssueLabel" event:focus="onClearError" />                <\/div>            <\/div>            <div class="requireMessage" style:display="{Binding showRequireMessage Converter=boolToDisplay}">                <span class="requireSign">                    <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_RequiredSign}" />                <\/span>                <span class="requireLabel">                    <TextBlock Text="{Binding resources.L_Fdbk_ReportAProblemOnMap_Required}" />                <\/span>            <\/div>            <div class="feedbackCardFoot" style:display="{Binding showSendButton Converter=boolToDisplay}">                <a class="{Binding buttonClassName}" aria-label="{Binding resources.L_Fdbk_Send}" event:click="onProblemSendClick" href="#" role="button" data-tag="problemOnMapSendButton" data-type="{Binding feedbackType}">                    <TextBlock Text="{Binding resources.L_Fdbk_Send}" />                <\/a>            <\/div>        <\/div>        <div class="thankYouPanel" style:display="{Binding showThankYouPanel Converter=boolToDisplay}" role="status" aria-labelledby="thankYouMessageBase" aria-expanded="{Binding showThankYouPanel}" data-tag="thankYouPanel">            <div class="thankYouMessage" id="thankYouMessageBase">                <TextBlock Text="{Binding resources.L_Fdbk_ThankYou}" />            <\/div>            <div class="feedbackCardFoot">                <a class="textButton thankYouPanel" title="{Binding resources.L_Fdbk_Done}" event:click="onFeedbackDoneClick" href="#" role="button" tabindex="0" data-tag="feedbackDoneButton">                    <TextBlock Text="{Binding resources.L_Fdbk_Done}" />                <\/a>            <\/div>        <\/div>        <div class="messagePanel" style:display="{Binding showMessagePanel Converter=boolToDisplay}" role="status" aria-expanded="{Binding showMessagePanel}" data-tag="messagePanel">            <div class="reminderMessage" data-tag="reminderMessage">                <TextBlock Text="{Binding reminderMessage}" />            <\/div>        <\/div>    <\/div><\/div>',v=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),et=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},tt=this&&this.__assign||function(){return tt=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tt.apply(this,arguments)},h=function(){function t(){}return t.buildScenarioDropDown=function(t,i,r){var e,u,f;r||(r="");e=[];switch(t){case 3:u=n.L_Fdbk_Option_DidNotFind;u=u.replace("{0}",r);f=n.L_Fdbk_Option_IssueWithSearchResult;f=f.replace("{0}",r);e=i===6?[{text:n.FdbkSelectArea,value:0},{text:u,value:3},{text:n.FdbkAreaMap,value:1},{text:n.FdbkNotMyLocale,value:2},{text:n.L_Fdbk_Other,value:7}]:[{text:n.FdbkSelectArea,value:0},{text:u,value:3},{text:f,value:4},{text:n.FdbkAreaMap,value:1},{text:n.FdbkNotMyLocale,value:2},{text:n.L_Fdbk_Other,value:7}];break;case 5:e=[{text:n.FdbkSelectArea,value:0},{text:n.FdbkAreaDirections,value:5},{text:n.FdbkAreaMap,value:1},{text:n.FdbkNotMyLocale,value:2},{text:n.L_Fdbk_Other,value:7}];break;case 7:u=n.L_Fdbk_Option_DidNotFind;u=u.replace("{0}",r);f=n.FdbkAreaRealEstate;f=f.replace("{0}",r);e=[{text:n.FdbkSelectArea,value:0},{text:u,value:3},{text:f,value:6},{text:n.FdbkAreaMap,value:1},{text:n.FdbkNotMyLocale,value:2},{text:n.L_Fdbk_Other,value:7}];break;default:e=[{text:n.FdbkSelectArea,value:0},{text:n.FdbkAreaMap,value:1},{text:n.FdbkNotMyLocale,value:2},{text:n.L_Fdbk_Other,value:7}]}return e},t.defaultScenario=function(t,i){var u,r;return i||(i=""),u={text:n.FdbkSelectArea,value:0},t===5?u={text:n.FdbkAreaDirections,value:5}:t===3||t===6?(r=n.L_Fdbk_Option_DidNotFind,r=r.replace("{0}",i),u={text:r,value:3}):t===7?(r=n.FdbkAreaRealEstate,r=r.replace("{0}",i),u={text:r,value:6}):t===8&&(u={text:n.FdbkAreaMap,value:1}),u},t.buildProblemType=function(t,i,r){var f=[];switch(t){case 1:f=[{text:n.L_Fdbk_SelectProblem,value:0},{text:n.FdbkPostcodeLabel,value:5},{text:n.L_Fdbk_ProblemAdministrativeDistricts,value:10},{text:n.FdbkProblemAerialBE,value:6},{text:n.L_Fdbk_ProblemAirport,value:7},{text:n.L_Fdbk_ProblemBridge,value:8},{text:n.L_Fdbk_ProblemCity,value:9},{text:n.TerrainProblemType,value:13},{text:n.FdbkProblemMapDisplay,value:2},{text:n.L_Fdbk_ProblemNeighborhood,value:16},{text:n.L_Fdbk_ProblemRoad,value:1},{text:n.FdbkProblemRoadView,value:14},{text:n.L_Fdbk_ProblemWater,value:15},{text:n.FdbkProblemZoom,value:3}];r&&r.keywords&&r.keywords.length&&(r.keywords.indexOf("flyOver")>-1?f.push({text:n.FdbkProblemFlyover,value:11}):r.keywords.indexOf("3dlandmarks")>-1?f.push({text:n.FdbkLandmarks,value:12}):(u===null||u===void 0?void 0:u.enableStreetsideFdbk)&&r.keywords.indexOf("Streetside")>-1&&f.push({text:n.StreetsideMapStyle,value:34}));break;case 3:f=[{text:n.L_Fdbk_SelectProblem,value:0},{text:n.FdbkProblemLookAddress,value:30},{text:n.FdbkProblemLookBusiness,value:28},{text:n.FdbkProblemLookPlace,value:29}];break;case 4:f=i===2||i===3?[{text:n.L_Fdbk_SelectProblem,value:0},{text:n.L_Fdbk_locationIncorrect,value:25},{text:n.L_Fdbk_AddressMissing,value:31},{text:n.L_Fdbk_AddressLocationIncorrect,value:32},{text:n.L_Fdbk_AddressSideIncorrect,value:33},{text:n.L_Fdbk_AddressZipIncorrect,value:27},{text:n.L_Fdbk_Other,value:35},]:[{text:n.L_Fdbk_SelectProblem,value:0},{text:n.L_Fdbk_locationIncorrect,value:25},{text:n.L_Fdbk_nameIncorrect,value:26},{text:n.L_Fdbk_AddressZipIncorrect,value:27},{text:n.L_Fdbk_Other,value:35},];break;case 7:default:f=i===10?[{text:n.L_Fdbk_SelectProblem,value:0},{text:n.FdbkProblemTraffic,value:17},{text:n.FdbkProblemAccessibility,value:19},{text:n.FdbkProblemLocalGuide,value:20},{text:n.FdbkProblemMeasure,value:21},]:i===11?[{text:n.L_Fdbk_SelectProblem,value:0},{text:n.FdbkProblemTraffic,value:17},{text:n.FdbkProblemMyPlaces,value:18},{text:n.FdbkProblemAccessibility,value:19},{text:n.FdbkProblemMeasure,value:21},]:[{text:n.L_Fdbk_SelectProblem,value:0},{text:n.FdbkProblemTraffic,value:17},{text:n.FdbkProblemAccessibility,value:19},{text:n.FdbkProblemMeasure,value:21},]}return f},t.setDefaultProblemType=function(t){if(t){if(t===11)return{text:n.FdbkProblemFlyover,value:11};if(t===12)return{text:n.FdbkLandmarks,value:12};if(t===34)return{text:n.StreetsideMapStyle,value:34}}return{text:n.FdbkSelectArea,value:0}},t.buildDirectionsIssues=function(t,i){var u=[],r,f;if(i){for(u.push({text:n.L_Fdbk_SelectProblem,value:0}),r=0;r<t.length;r++)f=t[r].name?t[r].name:t[r].address,f&&u.push({text:a._formatString(n.L_Fdbk_LocationInDirectionsIncorrect,f),value:10+r});u.push({text:n.L_Fdbk_IncorrectTimesTransit,value:4});u.push({text:n.FdbkDirectionIncorrect,value:3});u.push({text:n.FdbkDirectionRoadClose,value:7})}else{for(u.push({text:n.L_Fdbk_SelectProblem,value:0}),r=0;r<t.length;r++)f=t[r].name?t[r].name:t[r].address,f&&u.push({text:a._formatString(n.L_Fdbk_LocationInDirectionsIncorrect,f),value:10+r});u.push({text:n.FdbkDirectionIncorrect,value:1});u.push({text:n.FdbkDirectionRoadClose,value:7});u.push({text:n.FdbkRouteTime,value:6})}return u},t.defaultDirectionsIssue=function(){return{text:n.L_Fdbk_SelectProblem,value:0}},t.buildSubProblemDropDownItems=function(t){var i=[];switch(t){case 1:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.L_Fdbk_RoadNameIncorrect,value:34},{text:n.L_Fdbk_RoadRemove,value:35},{text:n.L_Fdbk_RoadLocationIncorrect,value:36},{text:n.L_Fdbk_RoadMissing,value:37},{text:n.L_Fdbk_RoadClosed,value:38},{text:n.L_Fdbk_RoadTypeIncorrect,value:39},{text:n.L_Fdbk_RoadOneWay,value:40},{text:n.L_Fdbk_RoadTwoWay,value:41},{text:n.L_Fdbk_RoadOneWayOpposite,value:42},{text:n.L_Fdbk_Other,value:59});break;case 4:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.L_Fdbk_AddressMissing,value:4},{text:n.L_Fdbk_AddressLocationIncorrect,value:3},{text:n.L_Fdbk_AddressSideIncorrect,value:5},{text:n.L_Fdbk_AddressZipIncorrect,value:1},{text:n.L_Fdbk_AddressZipMissing,value:2},{text:n.L_Fdbk_Other,value:59});break;case 5:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.L_Fdbk_AddressZipIncorrect,value:1},{text:n.L_Fdbk_AddressZipMissing,value:2},{text:n.L_Fdbk_Other,value:59});break;case 9:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.L_Fdbk_CityNameIncorrect,value:18},{text:n.L_Fdbk_CityLocationIncorrect,value:19},{text:n.L_Fdbk_CityMissing,value:17},{text:n.L_Fdbk_CityNeighborhood,value:20},{text:n.L_Fdbk_Other,value:59});break;case 16:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.L_Fdbk_NeighborhoodNameIncorrect,value:32},{text:n.L_Fdbk_NeighborhoodLocationIncorrect,value:31},{text:n.L_Fdbk_NeighborhoodMissing,value:30},{text:n.L_Fdbk_NeighborhoodCity,value:33},{text:n.L_Fdbk_Other,value:59});break;case 10:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.FdbkSubProbPolitic,value:21},{text:n.FdbkSubProbBoundaryIncorrect,value:55},{text:n.FdbkSubProbBoundaryVisible,value:22},{text:n.L_Fdbk_AdminDistrictsEntityMissing,value:24},{text:n.L_Fdbk_AdminDistrictsWrongEntity,value:23},{text:n.L_Fdbk_AdminDistrictsCountryName,value:25},{text:n.L_Fdbk_AdminDistrictsStateName,value:25},{text:n.L_Fdbk_AdminDistrictsCountyName,value:25},{text:n.L_Fdbk_Other,value:59});break;case 13:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.L_Fdbk_LandFeatureNameIncorrect,value:29},{text:n.L_Fdbk_LandTypeIncorrect,value:28},{text:n.L_Fdbk_LandFeatureMissing,value:26},{text:n.L_Fdbk_LandLocationIncorrect,value:27},{text:n.L_Fdbk_Other,value:59});break;case 15:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.L_Fdbk_WaterMissing,value:45},{text:n.L_Fdbk_WaterLocationIncorrect,value:44},{text:n.L_Fdbk_WaterNameIncorrect,value:43},{text:n.L_Fdbk_WaterTypeIncorrect,value:46},{text:n.L_Fdbk_Other,value:59});break;case 8:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.L_Fdbk_BridgeClosed,value:12},{text:n.L_Fdbk_BridgeNameIncorrect,value:14},{text:n.L_Fdbk_BridgeMissing,value:15},{text:n.L_Fdbk_BridgeRemoved,value:16},{text:n.L_Fdbk_BridgeLocationIncorrect,value:13},{text:n.L_Fdbk_Other,value:59});break;case 7:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.L_Fdbk_AirportIncorrect,value:9},{text:n.L_Fdbk_AirportMissing,value:10},{text:n.L_Fdbk_AirportWrongLocation,value:11},{text:n.L_Fdbk_Other,value:59});break;case 6:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.L_Fdbk_ImageryOutOfDate,value:8},{text:n.L_Fdbk_ImageryBlurry,value:6},{text:n.L_Fdbk_ImageryRoadMismatch,value:7},{text:n.L_Fdbk_Other,value:59});break;case 18:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.FdbkSubProbCollections,value:52},{text:n.FdbkSubProbFavorites,value:51},{text:n.FdbkSubProbHomeWork,value:50},{text:n.FdbkSubProbItineraries,value:53});break;case 34:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.L_Fdbk_ImageryOutOfDate,value:8},{text:n.L_Fdbk_ImageryBlurry,value:6},{text:n.ImageryTooDark,value:56},{text:n.ImageryOverexposed,value:57},{text:n.ReportAProblem,value:58});break;default:i.push({text:n.L_Fdbk_SelectSubProblem,value:0},{text:n.L_Fdbk_Other,value:59})}return i},t.GetDirectionsMode=function(n){var t="driving";return n===b.transit?t="transit":n>=b.walking&&(t="walking"),t},t.GetDirectionsTimeType=function(n){return n===ft.arrival?"arrival":"departure"},t}(),yi=function(t){function i(i){var u=this,r={};return u=t.call(this,r,i,ci)||this,r.defineProperty("showTip",null,null,{defaultValue:!1}),r.defineProperty("showPin",null,null,{defaultValue:!1}),r.defineProperty("dragPinTip"),u.resources=n,u}return v(i,t),i}(st),pi=function(n){function t(t){var i=this,r=new g(0,0),u=new ei(13,32);return i=n.call(this,null,r,u)||this,i._overlayViewModel=new yi(t),i.setOverlayElement(i._overlayViewModel.getControl()),i}return v(t,n),t.prototype.setShowTip=function(n){this._overlayViewModel.setShowTip(n)},t.prototype.setShowPin=function(n){this._overlayViewModel.setShowPin(n)},t.prototype.setDragPinTip=function(n){this._overlayViewModel.setDragPinTip(n)},t}(fi),o=function(){function n(){}return n.getStarGateForm=function(n){var t="";switch(n){case 5:t="Problem with Directions";break;case 2:t="Problem with User Location";break;case 3:case 4:t="Problem with Search";break;case 6:t="Problem with Real Estate";break;default:t="Problem on Map"}return t},n.getStargateScenario=function(n){var t="";switch(n){case 1:t="Map";break;case 5:t="Directions";break;case 3:t="No Search Results Found";break;case 4:t="Search issue found";break;case 2:t="User Location incorrect";break;case 6:t="Real estate issue";break;case 7:t="Something Else";break;default:t="No problem selected"}return t},n.getStargateIssueEntityType=function(n){var t="";switch(n){case 1:t="Road";break;case 30:t="Address";break;case 10:t="Admininistrative district";break;case 7:t="Airport";break;case 8:t="Bridge";break;case 9:t="City";break;case 13:t="Landform";break;case 16:t="Neighborhood";break;case 15:t="Waterbody";break;case 19:t="Accessibility and Performance";break;case 28:t="Issue with Business";break;case 11:t="Flyover";break;case 12:t="3D Landmarks";break;case 34:t="Streetside";break;case 22:t="My Contributions";break;case 6:t="Imagery";break;case 25:t="Did not find Location";break;case 26:t="Did not find business";break;case 27:t="Did not find post code";break;case 24:t="UX Language is incorrect";break;case 20:t="Issue with Local Guide";break;case 4:t="Address on the map is incorrect";break;case 5:t="Postal code on the map is incorrect";break;case 2:t="Map displaying incorrectly (e.g. overlapping, all white, etc.)";break;case 21:t="Measure function is faulty";break;case 18:t="My Places issue";break;case 29:t="Search issue with a Place";break;case 23:t="Issue with Print or Share";break;case 14:t="Road view or Dark Road view";break;case 17:t="Issue with Traffic";break;case 3:t="Issue with Map Zoom";break;case 35:t="Something else";break;default:case 0:t="No problem selected"}return t},n.getStargateIssueValue=function(n){var t="";switch(n){case 21:t="A political entity is missing or incorrect (country/region, state/province, county etc.)";break;case 55:t="The boundary between countries, states, or province is incorrect";break;case 23:t="Political entity is wrong type";break;case 25:t="Incorrect or missing name for (country/region, state/province, county etc.)";break;case 22:t="The boundary between countries, states, or provinces is hard to see";break;case 24:t="A political entity is missing";break;case 4:t="Address is missing from road";break;case 3:t="Address is in wrong location";break;case 5:t="Address is on the wrong side of the road";break;case 11:t="Airport in wrong location";break;case 9:t="Airport has incorrect or missing name";break;case 10:t="Airport is missing";break;case 12:t="Bridge is closed";break;case 14:t="Bridge name is incorrect or missing";break;case 15:t="Bridge is missing";break;case 16:t="Bridge needs to be removed";break;case 13:t="Bridge is in wrong location";break;case 18:t="City name is incorrect";break;case 19:t="City location is incorrect";break;case 17:t="City is missing";break;case 20:t="City should be neighborhood";break;case 8:t="Imagery is out of date";break;case 6:t="Imagery is cloudy or blurry";break;case 7:t="Imagery and roads do not match";break;case 57:t="Imagery is over exposed";break;case 56:t="Imagery is too dark";break;case 29:t="Name of land feature is incorrect";break;case 28:t="Land feature is wrong type (forest should be a desert etc.)";break;case 26:t="Land feature is missing";break;case 27:t="Land feature is the wrong location";break;case 49:t="Did not find address";break;case 47:t="Did not find business";break;case 48:t="Did not find place";break;case 52:t="Did not find collection";break;case 51:t="Did not find favorite";break;case 50:t="Problem with Home or Work";break;case 53:t="Problem with saved itinerary";break;case 32:t="Neighborhood name is incorrect";break;case 31:t="Neighborhood location is incorrect";break;case 30:t="Neighborhood is missing";break;case 33:t="Neighborhood should be city";break;case 1:t="Postal code has incorrect zip code";break;case 2:t="Postal code is missing";break;case 34:t="Road name is incorrect or missing";break;case 35:t="Road needs to be removed";break;case 36:t="Road location is incorrect";break;case 37:t="Road is missing";break;case 38:t="Road is closed";break;case 39:t="Road type is incorrect (highway or street)";break;case 40:t="Road should be one way";break;case 41:t="Road should be two ways";break;case 42:t="Road is one way in the wrong direction";break;case 45:t="Water body is missing";break;case 44:t="Water body is in an incorrect location";break;case 43:t="Water body has incorrect name";break;case 46:t="Incorrect type of water body (ocean should be sea etc.)";break;case 59:t="Something else";break;case 0:default:t="No subproblem selected"}return t},n.getDirectionsIssue=function(n){var t="Other";return n===1?t="Inaccurate Directions or could be better":n===3?t="A better transit route that is not shown":n===4?t="Incorrect times for transit services":n===6?t="Incorrect time for driving route":n===5?t="Incorrect location of a transit stop":n===7?t="Route has a closed road that was not indicated":n>=10&&(t="Inaccurate location origin/destination"),t},n.getStargateNoResultType=function(n){var t="";return n===1?t="Address":n===3?t="Place":n===2?t="Business":n===4&&(t="Other"),t},n.hasProblemType=function(n){var t=!1;switch(n){case 4:case 1:case 3:case 7:t=!0}return t},n.hasSubProblem=function(n){var t=!1;switch(n){case 30:case 10:case 7:case 8:case 9:case 6:case 13:case 18:case 16:case 1:case 15:case 5:case 4:case 34:t=!0}return t},n.Identifier_Unknown="Unknown",n.SchemaVersion="2.0",n.ClientType_MapWebsite="MapWebsite",n.Partner_SUrFLegacy="SUrFLegacy",n.FeedbackType_DSAT="DSAT",n.Issue_DidnotFindAddress="Didn't find Address",n.Issue_DidnotFindLocation="Didn't find Location",n.Issue_DidnotFindBusiness="Didn't find Business",n.Issue_DidnotFindOther="Didn't find Something else",n}(),l=function(){function n(){}return n.GetStargateProblemValue=function(n){var t="";switch(n){case 1:t="Problem with roads";break;case 2:t="Problem with addresses";break;case 5:t="Problem with admininistrative districts";break;case 9:t="Problem with airports";break;case 8:t="Problem with bridges";break;case 3:t="Problem with city";break;case 6:t="Problem with land features";break;case 4:t="Problem with neighborhoods";break;case 7:t="Problem with water bodies";break;case 11:t="Expected location result not returned";break;case 12:t="Problem with imagery";break;case 13:t="Some other problem";break;default:case 0:t="No problem selected"}return t},n.GetStargateIssueEntityType=function(n){var t="";switch(n){case 1:t="Road";break;case 2:t="Address";break;case 5:t="Admininistrative district";break;case 9:t="Airport";break;case 8:t="Bridge";break;case 3:t="City";break;case 6:t="Landform";break;case 4:t="Neighborhood";break;case 7:t="Waterbody";break;case 13:t="Something else";break;case 12:t="Imagery";break;default:case 0:t="No problem selected"}return t},n.GetStargateSubProblemValue=function(n){var t="";switch(n){case 1:t="Road name is incorrect or missing";break;case 2:t="Road needs to be removed";break;case 3:t="Road location is incorrect";break;case 4:t="Road is missing";break;case 5:t="Road is closed";break;case 6:t="Road type is incorrect (highway or street)";break;case 7:t="Road should be one way";break;case 8:t="Road should be two ways";break;case 9:t="Road is one way in the wrong direction";break;case 10:t="Address is missing from road";break;case 11:t="Address is in wrong location";break;case 12:t="Address is on the wrong side of the road";break;case 13:t="Postal code has incorrect zip code";break;case 14:t="Postal code is missing";break;case 15:t="City name is incorrect";break;case 16:t="City location is incorrect";break;case 17:t="City is missing";break;case 18:t="City should be neighborhood";break;case 19:t="Neighborhood name is incorrect";break;case 20:t="Neighborhood location is incorrect";break;case 21:t="Neighborhood is missing";break;case 22:t="Neighborhood should be city";break;case 23:t="The boundary between countries is incorrect";break;case 24:t="The boundary between states/provinces is incorrect";break;case 25:t="The boundary between counties is incorrect";break;case 26:t="A political entity is missing (country, state, county, province etc.)";break;case 27:t="Political entity is wrong type";break;case 28:t="Country has incorrect or missing name";break;case 29:t="State/province has incorrect or missing name";break;case 30:t="County has incorrect or missing name";break;case 31:t="Name of land feature is incorrect";break;case 32:t="Land feature is wrong type (forest should be a desert etc.)";break;case 33:t="Land feature is missing";break;case 34:t="Land feature is the wrong location";break;case 35:t="Water body is missing";break;case 36:t="Water body is in an incorrect location";break;case 37:t="Water body has incorrect name";break;case 38:t="Incorrect type of water body (ocean should be sea etc.)";break;case 39:t="Bridge is closed";break;case 40:t="Bridge name is incorrect or missing";break;case 41:t="Bridge is missing";break;case 42:t="Bridge needs to be removed";break;case 43:t="Bridge is in wrong location";break;case 44:t="Airport in wrong location";break;case 45:t="Airport has incorrect or missing name";break;case 46:t="Airport is missing";break;case 47:t="Name is incorrect";break;case 48:t="Location is incorrect";break;case 49:t="Address of location is incorrect";break;case 50:t="Expected result not returned";break;case 51:t="Imagery is out of date";break;case 52:t="Imagery is cloudy or blurry";break;case 53:t="Imagery and roads do not match";break;case 54:t="Something else";break;case 0:default:t="No subproblem selected"}return t},n.GetStargateNoFoundPlaceType=function(n){var t="";switch(n){case 1:t="Address";break;case 2:t="Business";break;case 3:t="Populated Place";break;default:case 0:t="Other"}return t},n.GetDirectionsIssue=function(n){var t="Other";return n===1?t="Inaccurate Directions":n===3?t="A better route that is not shown":n===4?t="Incorrect times for transit services":n===5?t="Incorrect location of a transit stop":n>=10&&(t="Inaccurate location origin/destination"),t},n.GetDirectionsMode=function(n){var t="driving";return n===b.transit?t="transit":n>=b.walking&&(t="walking"),t},n.GetDirectionsTimeType=function(n){return n===ft.arrival?"arrival":"departure"},n.FeedbackType="Report a problem",n.ParamFt_BaseMap="Maps.Basemap",n.ParamFt_Local="Maps.Local",n.ParamFt_Search="Maps.Search",n.ParamFt_Directions="Maps.Directions",n.ParamSrc_BaseMap="Basemap",n.ParamSrc_Address="Address",n.ParamSrc_Location="Location",n.ParamSrc_Local="Local",n.ParamSrc_Directions="Directions",n.SubScenario_NotFound="Didn't find result",n.SubScenario_Issue="Issue with result",n.GeoEntityType_Address="Address",n.GeoEntityType_Place="PopulatedPlace",n.GeoEntityType_Business="Business",n.GeoEntityType_Other="Other",n.Identifier_Unknown="Unknown",n.SchemaVersion="2.0",n.ClientType_MapWebsite="MapWebsite",n.FeedbackType_SAT="SAT",n.FeedbackType_DSAT="DSAT",n.FeedbackType_Suggestion="Suggestion",n.FORM_General="General",n.FORM_ProblemOnMap="Problem on Map",n.FORM_ProblemWithSearch="Problem With Search",n.FORM_ProblemWithDirections="Problem With Directions",n.FORM_ProblemWithRealEstate="Problem with Real Estate",n.Scenario_General="General",n.Scenario_Map="Map",n.Scenario_Local="Local",n.Scenario_Direction="Direction",n.IssueEntityType_Address="Address",n.IssueEntityType_Place="Place",n.IssueEntityType_Business="Business",n.IssueEntityType_Other="Other",n.Issue_DidnotFindAddress="Didn't find Address",n.Issue_DidnotFindLocation="Didn't find Location",n.Issue_DidnotFindBusiness="Didn't find Business",n.Issue_DidnotFindOther="Didn't find Something else",n.Partner_SUrFLegacy="SUrFLegacy",n}(),it=function(t){function r(i,r,u,f){var e=t.call(this,i,r,u)||this;return i.defineProperty("showMessagePanel"),e.resources=n,e.feedbackTask=f,e.invalidated=new k,e.showPushpinReminderMessage=!0,e.isSubmitted=!1,e._controlTemplateFactory=r,e.initLocationOfPushpin=s.getMapCenter(e.getMap()),e}return v(r,t),r.prototype.onTaskStateChanged=function(n){if(n.animationState===1&&this.setFocusToDefaultElement(),n.activationState===1&&n.prominence===1){if((this.feedbackType===6||this.feedbackType===2)&&!this._feedbackPushpin)return;this.feedbackType===1||this.isSubmitted||this.showPushpin()}else n.activationState===2&&this.feedbackType!==1&&this._feedbackPushpin&&this.hidePushpin()},r.prototype.setCloseButton=function(){},r.prototype.setFocusToDefaultElement=function(){var n=this;Microsoft.Maps.setTimeout(function(){var t=n.getDefaultFocusElement();t&&t.length>0&&(t[0].focus(),t[0].focus());n.onClearError(null)},20)},r.prototype.getDefaultFocusElement=function(){try{if(this.getControl&&this.getControl()){var n=this.getControl().select(".bm_dropdownEntry");return n.length===0&&(n=this.getControl().select("a,textarea")),n}return null}catch(t){return null}},r.prototype.createPushpin=function(){var n=this,i=new ui("","",null),t;this._feedbackPushpin=new ii(this.initLocationOfPushpin,i,dt.getImageFromCss("feedbackPushpin"),new at(13,32));t=this.getMap();this._defaultFeedbackLayer=new si(ni.getUniqueId(),this,new wt(t),r.feedbackLayerZIndex);this._feedbackPushpin.layer=this._defaultFeedbackLayer;this._feedbackPushpin.entity.collisionBehavior=2;this._defaultFeedbackLayer.setRenderTarget(1);this.disposables.push(this._defaultFeedbackLayer.primitiveHoverStarted.add(function(t){return n._onPrimitiveHover(t,!0)}));this.disposables.push(this._defaultFeedbackLayer.primitiveHoverStopped.add(function(t){return n._onPrimitiveHover(t,!1)}));this.disposables.push(this._defaultFeedbackLayer.primitiveMoveContinued.add(function(t){return n._onPrimitiveMoveContinued(t)}));this.disposables.push(this._defaultFeedbackLayer.primitiveMoveStopped.add(function(t){return n._onPrimitiveMoveStopped(t)}));this.disposables.push(t.mapModeChanged.add(function(t){return n._onMapModeChanged(t.newMode)}));t.getLayers().insert(this._defaultFeedbackLayer);this.updateDragPin(!0);this.showPushpinTipWithTimer()},r.prototype.showPushpinTipWithTimer=function(){var n=this;this.showPushiPinTip(!0);this._timeOutFn=Microsoft.Maps.setTimeout(function(){n.showPushiPinTip(!1);window.clearTimeout(n._timeOutFn)},u.feedbackPinTipExpiry)},r.prototype.onClosePanel=function(n){n&&(n.preventDefault(),n.stopPropagation());this.feedbackTask.onCloseClick.invoke()},r.prototype.onClearError=function(){this.setShowMessagePanel(!1)},r.prototype._onPrimitiveHover=function(n,t){this.showPushiPinTip(t)},r.prototype._onPrimitiveMoveContinued=function(n){var t=n.location;this.updateDragPin(!0,t);this.showPushiPinTip(!1)},r.prototype._onPrimitiveMoveStopped=function(n){var t=n.location;this.updatePushpin(n.location);this.onPushPinUpdate();this.updateDragPin(!0,t);this.feedbackTask.primitiveInteracted.invoke()},r.prototype.updateDragPin=function(n,t){this._feedbackPushpin&&(n?(t||(t=this.getPushpinLocation()),r.showDragPin(this.getMap(),this._controlTemplateFactory,t,n)):r.hideDragPin(this.getMap()))},r.showDragPin=function(t,i,u,f){r._feedbackPushpinOverlay||(r._feedbackPushpinOverlay=new pi(i));r._pushpinOverlayShowing||(t.getOverlays().insert(r._feedbackPushpinOverlay),r._pushpinOverlayShowing=!0);r._feedbackPushpinOverlay.setAlignment(u);r._feedbackPushpinOverlay.setShowPin(f);r._feedbackPushpinOverlay.setShowTip(!0);r._feedbackPushpinOverlay.setDragPinTip(n.FdbkPinToolTip)},r.hideDragPin=function(n){r._feedbackPushpinOverlay&&(r._pushpinOverlayShowing=!1,r._feedbackPushpinOverlay.setShowTip(!1),n.getOverlays().remove(r._feedbackPushpinOverlay))},r.prototype.updatePushpin=function(n){n&&(this._feedbackPushpin.geometry.x=n.longitude,this._feedbackPushpin.geometry.y=n.latitude,this._feedbackPushpin.geometry.bounds=[n.latitude,n.longitude,n.latitude,n.longitude],this.invalidated.invoke())},r.prototype.onPushPinUpdate=function(){},r.prototype.showPushpin=function(){r._taskOfPushpinOverlayShowing=this.feedbackTask.id;this._feedbackPushpin?(this._defaultFeedbackLayer.setVisible(!0),this.setMapViewIfPrimitivesOutOfBound(this.getMap(),this.getPushpinLocation()),this.invalidated.invoke(),this.updateDragPin(!0),this._defaultFeedbackLayer&&this._defaultFeedbackLayer.setZIndex(r.feedbackLayerZIndex+1)):this.createPushpin()},r.prototype.hidePushpin=function(){this._defaultFeedbackLayer&&this._defaultFeedbackLayer.setVisible(!1);this._hideTaskDragPin();this._defaultFeedbackLayer&&this._defaultFeedbackLayer.setZIndex(r.feedbackLayerZIndex+1)},r.prototype.removePushPin=function(){this._feedbackPushpin&&(this._hideTaskDragPin(),this.getMap().getLayers().remove(this._defaultFeedbackLayer),this._feedbackPushpin=null)},r.prototype._hideTaskDragPin=function(){r._taskOfPushpinOverlayShowing===this.feedbackTask.id&&this.updateDragPin(!1)},r.prototype.getMap=function(){return this.feedbackTask.map},r.prototype.getPushpinLocation=function(){var n=this.initLocationOfPushpin;return this._feedbackPushpin&&(n=new g(this._feedbackPushpin.geometry.y,this._feedbackPushpin.geometry.x)),n},r.prototype.isPushpinMoved=function(){return!g.areEqual(this.initLocationOfPushpin,this.getPushpinLocation())},r.prototype.getPrimitives=function(n,t){var i=[];this._feedbackPushpin&&i.push(this._feedbackPushpin);t&&t({primitives:i})},r.prototype.setMapViewIfPrimitivesOutOfBound=function(n,t){var i=s.getMapBounds(n,!0);i.contains(t)||s.setMapCenter(n,t,n.getMercatorZoomLevel())},r.prototype._onMapModeChanged=function(n){var t=this;this.feedbackType===1||this.isSubmitted||(n===2?this.updateDragPin(!1):this._defaultFeedbackLayer.getVisible()&&Microsoft.Maps.setTimeout(function(){t.updateDragPin(!0)},100))},r.prototype.hasInput=function(){return!1},r.prototype.isPushpinVisible=function(){return this._defaultFeedbackLayer&&this._defaultFeedbackLayer.getVisible&&this._defaultFeedbackLayer.getVisible()},r.prototype.showPushiPinTip=function(){r._feedbackPushpinOverlay&&r._feedbackPushpinOverlay.setDragPinTip(n.FdbkPinToolTip)},r.prototype.isDragPinShowing=function(){return r._pushpinOverlayShowing},r.prototype._focusInThankYouPanel=function(){window.clearTimeout(this.feedbackTimeoutHandler);this.feedbackTimeoutHandler=Microsoft.Maps.setTimeout(function(){var n=i(".textButton.thankYouPanel");n&&n.length&&n[0].focus()},this.feedbackTimeout)},r.feedbackLayerZIndex=1e4,r}(st),wi=function(r){function e(t,i,u){var f=this,e={};return f=r.call(this,e,t,li,i)||this,f.feedbackType=6,u&&(f.reportType=u.reportType?u.reportType:0,f._query=u.query?u.query:"",u.pushPinLocation&&(f.initLocationOfPushpin=u.pushPinLocation),u.scenarioKey&&(f._scenarioKey=u.scenarioKey),u.userFacts&&(f.userFacts=u.userFacts),u.rapEntryPoint&&(f._rapEntryPoint=u.rapEntryPoint)),e.defineProperty("showFeedbackForm"),e.defineProperty("showBackToEditButton"),e.defineProperty("showSuggestions"),e.defineProperty("showThankYouPanel"),e.defineProperty("showDragPushPinErrorMessage"),e.defineProperty("showAllFields"),e.defineProperty("businessCity"),e.defineProperty("businessState"),f.setShowBackToEditButton(!0),f.setShowFeedbackForm(!0),f.setShowSuggestions(!1),f.setShowThankYouPanel(!1),f.setShowAllFields(!1),f._isPushpinManuallyUpdated=!1,f._isAddressGeocoded=!1,f.getControl().select(".businessOwnerLink").set_html(a._formatString(n.FdbkBingPlacesText,f._getBingPlacesLink(n.FdbkBingPlacesLink))),f._reverseGeocodePushpin(function(n,t){f._isValidField(f.businessAddress)||f._isValidField(f.getBusinessCity())||f._isValidField(f.getBusinessState())||f._isValidField(f.businessPostalCode)||(f.setBusinessCity(n),f.setBusinessState(t),f._initialBusinessCity=n,f._initialBusinessState=t)}),f}return v(e,r),e.prototype.onReturnToSearchResultClick=function(n){n.preventDefault();p.invokeHandler(y.taskDataHandlerKey,{action:"remove",id:this.feedbackTask.id})},e.prototype.onMeFeedbackSubmitClick=function(n){var u,i,r;(n.preventDefault(),n.stopPropagation(),t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestSubmitClicked}),u=this._validateNoResultFeedbackForm(),u)&&(i=this,r=function(){var n=i.numberOfSuggFetched>0;i.isSnrRequestCompleted&&n?(i.setShowFeedbackForm(!1),i.hidePushpin(),i.setShowSuggestions(!0),t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestShowSugg,DATA:i.numberOfSuggFetched})):(i.processSubmitBeforeSendingData(),t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestSubmitDirectly}))},this.isSnrRequestCompleted?r(n):(Microsoft.Maps.setTimeout(function(){r(n)},1e3),t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestWaitForSNR})))},e.prototype.onMeFeedbackBackToEditClick=function(n){n.preventDefault();n.stopPropagation();this.getShowBackToEditButton()&&(this.setShowSuggestions(!1),this.setShowFeedbackForm(!0),this.showPushpin(),this.closeChildLocalDetailsCard(),t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestBackToEditClicked}))},e.prototype.closeChildLocalDetailsCard=function(){var e=document.querySelector("[data-subtaskid='"+this.feedbackTask.id+"']"),t,n,i,r,u,f;e&&(t=e.getAttribute("data-taskid"),t)&&((n=document.querySelectorAll("[data-taskid='"+t+"']"),!n||n.length<2)||(i=n[1],r=i.getAttribute("data-subtaskid"),r&&r.indexOf("LocalDetailsTask")===0&&(u=i.querySelector(".cardFace .bm_cardCloseButton"),u&&u.click(),f=this.getMap(),f&&s.setMapCenter(f,this.initLocationOfPushpin))))},e.prototype.onMeFeedbackSubmitAnywayClick=function(n){n.preventDefault();n.stopPropagation();this.closeChildLocalDetailsCard();this.processSubmitBeforeSendingData();t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestSubmitAnywayClicked})},e.prototype.processSubmitBeforeSendingData=function(){var n=this;this._isAddressGeocoded===!1?this._geocodeAddressAndMovePushpin(function(t){n._isAddressGeocoded=t;n._sendSerfData()}):this._sendSerfData()},e.prototype.boolToDragPinMessageClass=function(n){var t="mefeedbackCardMovePinReminderDiv";return n===!0&&(t+=" requiredInputMissing"),t},e.prototype.onBlurFBRequiredInputFieldName=function(){if(this._validateField(this.businessName,".inputFieldBlock.name",e.nameValidationFailureIdentifier),u&&u.enableAutoSuggestOnMe&&this._isValidField(this.businessName)&&this._isValidField(this.getBusinessCity())&&this.lastBusinessName!==this.businessName){var n=this._isValidField(this.businessAddress)?this.businessAddress:"";n+=this.getBusinessCity();this.GetAutoSuggestions(this.businessName,n)}this.lastBusinessName=this.businessName},e.prototype.onBlurFBRequiredInputFieldAddress=function(n){var t=this;this._isAddressGeocoded=!1;n.target&&n.target.classList&&n.target.classList.contains("mefbBusinessCity")&&this._validateField(this.getBusinessCity(),".inputFieldBlock.city",e.cityValidationFailureIdentifier);this._geocodeAddressAndMovePushpin(function(n){t._isAddressGeocoded=n});u&&u.enableAutoSuggestOnMe&&n.target&&n.target.classList&&n.target.classList.contains("fbBusinessAddress")&&this.lastBusinessAddress!==this.businessAddress&&this._isValidField(this.businessName)&&this._isValidField(this.businessAddress)&&this.GetAutoSuggestions(this.businessName,this.businessAddress);this.lastBusinessAddress=this.businessAddress},e.prototype._validateField=function(n,i,r){var e=this._isValidField(n),u=this.feedbackTask.panelRoot.select(i);return u!==null&&u!==undefined&&(e===!1?u.add_class("requiredInputMissing"):u.remove_class("requiredInputMissing")),e===!1&&t.log(f.Feedback,t.InlineValidationFailure,{FT:t.FeedbackType_MissingEntity,SR:r,RE:this._rapEntryPoint?this._rapEntryPoint:""}),e},e.prototype._validateAddress=function(){var n=this._validateField(this.businessAddress,".inputFieldBlock.address",e.addressValidationFailureIdentifier),t=this.isPushpinMoved()||this._isPushpinManuallyUpdated,i=this._isValidField(this.businessPhone);return n?!0:t||i},e.prototype._isAddressValidForGeocode=function(){return this._isValidField(this.businessAddress)&&this._isValidField(this.getBusinessCity())},e.prototype._isValidField=function(n){return n!==undefined&&n!==null&&n.length!==0},e.prototype.onPushPinUpdate=function(){this.setShowDragPushPinErrorMessage(!1);this._isPushpinManuallyUpdated=!0},e.prototype._geocodeAddressAndMovePushpin=function(n){var t=this,i;this.feedbackTask.geoCoder&&this._isPushpinManuallyUpdated===!1&&this._isAddressValidForGeocode()?(i=this.businessAddress+", "+this.getBusinessCity()+", "+this.getBusinessState()+", "+this.businessPostalCode,this.feedbackTask.geoCoder.geocode(i,function(i){if(i.success&&i.results&&i.results.length>0&&i.results[0].confidence==="High"&&t._isPushpinManuallyUpdated===!1)if(t._isAutoGeocodeEnabled(i.results[0].address.countryRegionIso2)){var u=i.results[0].point,r=new g(u.coordinates[0],u.coordinates[1]);t.updatePushpin(r);t.updateDragPin(!0,r);s.setMapCenter(t.getMap(),r);s.setZoomLevel(t.getMap(),16);t.setShowDragPushPinErrorMessage(!1);n(!0)}else n(!1);else n(!1)},this.feedbackTask.map.getBounds(),1,!0,!0)):n(!1)},e.prototype._isAutoGeocodeEnabled=function(n){var t=!1,i;return u&&u.autoGeocodeMissingBusinessAddressMarkets&&(i=new RegExp(n,"i"),u.autoGeocodeMissingBusinessAddressMarkets.search(i)>=0&&(t=!0)),t},e.prototype._sendSerfData=function(){var i=s.getMapBounds(this.getMap(),!1),r=s.getMapCenter(this.getMap()),u=s.getMercatorZoomLevel(this.getMap()),e=o.getStargateNoResultType(2),h=o.getStargateIssueValue(47),c=o.getStargateScenario(3),n={FORM:o.getStarGateForm(4),Query:this._query,MapStyle:this.getMap().getMapType().displayName,MapViewBoundingBox:{NELatLon:{Latitude:i.getNorth(),Longitude:i.getEast()},SWLatLon:{Latitude:i.getSouth(),Longitude:i.getWest()}},MapViewCenter:{Latitude:r.latitude,Longitude:r.longitude},Zoom:u,FeedbackType:o.FeedbackType_DSAT,Scenario:c,Issue:h,UserComment:this.commentsSearchResultNotFound,Comments:this.commentsSearchResultNotFound,SuggestedEntity:{GeoLocation:{Latitude:this.getPushpinLocation().latitude,Longitude:this.getPushpinLocation().longitude},SuggestedEntityType:e},IsPushpinMoved:this.isPushpinMoved(),IsPushpinManuallyUpdated:this._isPushpinManuallyUpdated,ScenarioKey:this._scenarioKey};if(n.InitialBusinessCity=this._initialBusinessCity,n.InitialBusinessState=this._initialBusinessState,n.InitialPinLocation={Latitude:this.initLocationOfPushpin.latitude,Longitude:this.initLocationOfPushpin.longitude},n.IssueEntityType=o.getStargateIssueEntityType(28),n.SuggestedEntity.Address={AddressLine:this.businessAddress,City:this.getBusinessCity(),PostalCode:this.businessPostalCode,Subdivision:this.getBusinessState()},n.SuggestedEntity.Name=this.businessName,n.SuggestedEntity.PrimaryPhone=this.businessPhone,n.SuggestedEntity.PrimaryWebsite=this.businessWebsite,this.userFacts&&this.userFacts.Id&&(n.Id=this.userFacts.Id),this.userFacts&&this.userFacts.isTestingLocation==="true"&&(n.isTestingLocation=!0),n.ServerSideAPIEnabled=!0,this._rapEntryPoint){switch(this._rapEntryPoint){case 4:n.rapentrypoint="LocalListingMissingEntityLink";break;case 1:n.rapentrypoint="NoResultsCardMissingEntityLink";break;case 2:n.rapentrypoint="NoResultsCardRAPLink";break;case 3:n.rapentrypoint="RAPMenu";break;case 5:n.rapentrypoint="SuggestAnEditMissingEntityLink"}n.rappartner="MapsV8"}this._reverseGeocodePushpin(function(t,i,r){n.SuggestedEntity.Address.CountryCode=r});this.feedbackTask.sendLocalFeedback(n,"NEW",2);this.isSubmitted=!0;t.log(f.Feedback,"S",{FT:t.FeedbackType_MissingEntity,SR:"SM",RE:this._rapEntryPoint?this._rapEntryPoint:""});this.setShowFeedbackForm(!1);this.setShowSuggestions(!1);this.setShowThankYouPanel(!0);this.hidePushpin()},e.prototype._validateNoResultFeedbackForm=function(){var n=!0,i="",r=this._validateField(this.businessName,".inputFieldBlock.name",e.nameValidationFailureIdentifier),u=this._validateField(this.getBusinessCity(),".inputFieldBlock.city",e.cityValidationFailureIdentifier),o=this._validateAddress();return r===!1&&(i+=e.nameValidationFailureIdentifier,n=!1),o===!1&&(i+=e.addressValidationFailureIdentifier,n=!1),u===!1&&(i+=e.cityValidationFailureIdentifier,n=!1),n||t.log(f.Feedback,"S",{FT:t.FeedbackType_MissingEntity,SR:i,RE:this._rapEntryPoint?this._rapEntryPoint:""}),n},e.prototype._reverseGeocodePushpin=function(n){this.feedbackTask.reverseGeocoder?this.feedbackTask.reverseGeocoder.reverseGeocode(this.getPushpinLocation(),function(t){if(t&&t.success&&t.addressList&&t.addressList.length>0){var i=t.addressList[0].countryRegionIso2?t.addressList[0].countryRegionIso2:"",r=t.addressList[0].adminDistrict?t.addressList[0].adminDistrict:"",u=t.addressList[0].locality?t.addressList[0].locality:"";n(u,r,i)}else n("","","")},[],!0,0):n("","","")},e.prototype.findAncestor=function(n,t){while((n=n.parentElement)&&n.className.indexOf(t)<0)if(n.tagName.indexOf("html"))return null;return n},e.prototype.processItemClickEvent=function(n,t){var s=this,r=this.findAncestor(n.target,"me-listings-item"),u,f,e,h,c,o;r&&(u=r.getAttribute("data-entity"),f=i.Internals.parseJSON(u),t=f.entity.id,this.autoSuggCurrentSelectedEntity!==t)&&(e=this.feedbackTask.panelRoot.select("a[data-entity]"),h=0,c=this,e.for_each(function(n){var e=n.getAttribute("data-entity"),r=i.Internals.parseJSON(e),f,u;r&&r.entity&&r.entity.id&&(f=i(n),u=r.entity.id,u&&(u===t?(f.add_class("hover"),o=t):u===s.autoSuggCurrentSelectedEntity&&f.remove_class("hover")))}),this.autoSuggCurrentSelectedEntity=o)},e.prototype.GetAutoSuggestions=function(n,r){var l=this,o=this,s=n+" in "+r;o.isSnrRequestCompleted=!1;o.numberOfSuggFetched=0;o.autoSuggListElements=[];o.feedbackTask.panelRoot.select(".me-b_vList").set_style({visibility:"hidden"});t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestInitiationIdentifier,QUERY:s});var a={clickHandler:function(n,t){return l.processItemClickEvent(n,t)}},v=function(n){var ot=Date.now(),st=ot-b,r,c,rt,y,nt,et;if(t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestSNRResponseTime,DATA:st}),o.feedbackTask.panelRoot.select(".me-b_vList").clear(),n!==null&&n.value!==null&&n.value.length>0){var l=n.value,ht=o.feedbackTask.id,v="";for(c in l)l[c]&&(r=l[c],v+=r!==null&&r.bingId!==null?r.bingId+"|":"");v=v[v.length-1]==="|"?v.substring(v.length-1):v;t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestListingAnswerFetchedIdentifier,ID:v,RS:l.length});l=l.slice(0,3);for(c in l)if(l[c]){var r=l[c],k=r.geo!==null?r.geo.latitude:null,d=r.geo!==null?r.geo.longitude:null,p=r.bingId,g=r.name,tt=r.address.text,ct=r.menuUrl,ut=r.telephone,lt=r.url,at=r.image?r.image.contentUrl.substring(u.imageUrlPrefix.length)+"&w=76&h=108&c=7&rs=1&qlt=80&cdv=1":"",h=r.aggregateRating?r.aggregateRating.ratingValue/2:null,ft=r.aggregateRating?r.aggregateRating.reviewCount:null,it=null;if(r.review&&r.review.length>0)for(c in r.review)if(r.review[c].provider&&r.review[c].provider.length>0&&r.review[c].provider[0].name){it=r.review[c].provider[0].name;break}rt=sj_ce("li","","");y=sj_ce("a","","me-listings-item");y.setAttribute("href","#");var vt={geometryType:1,geometry:{x:k,y:d,bounds:[k,d,k,d]},entity:{title:g,id:"ypid: "+p,address:tt,menuUrl:ct,phone:ut,website:lt},routablePoint:{latitude:k,longitude:d}},yt={state:{entryPoint:"LocalListing",id:"ypid:"+p,flippingCard:!0,taskTitle:g},type:w.localDetailsTask,activateOptions:{parentId:ht}},pt={logData:{feature:t.FeedbackType_AutoSuggest,action:e.autoSuggestListingAnswerClickedIdentifier,data:{ID:"ypid:"+p,Q:g,PO:c+1}}};y.setAttribute("data-entity",i.Internals.stringify(vt));y.setAttribute("data-task",i.Internals.stringify(yt));y.setAttribute("data-instrumentation",i.Internals.stringify(pt));nt='<div><div class="me-b_imagePair me-tall_m"><div class="inner"><div class="cico" style="width:76px; height:108px;" ><img height="108" width="76" src="'+at+'" /><\/div><\/div><div class="me-b_vPanel" ><div><div class="me-b_factrow" >'+g+'<\/div><\/div><div><div class="me-b_factrow"><span title="'+tt+'" class="b_address" >'+tt+"<\/span><\/div> <\/div>";h&&ft&&it&&(nt+='<div><div class="me-b_factrow"><span class="csrc sc_rc1" role= "img" aria-label="Star Rating: '+h+' out of 5." ><span class='+(h&&h>0?h>.5?"sw_st":"sw_sth":"sw_ste")+"><\/span><span class="+(h&&h>1?h>1.5?"sw_st":"sw_sth":"sw_ste")+"><\/span><span class="+(h&&h>2?h>2.5?"sw_st":"sw_sth":"sw_ste")+"><\/span><span class="+(h&&h>3?h>3.5?"sw_st":"sw_sth":"sw_ste")+"><\/span><span class="+(h&&h>4?h>4.5?"sw_st":"sw_sth":"sw_ste")+"><\/span><\/span>"+it+" ("+ft+")<\/div><\/div>");nt+='<div><div class="me-b_factrow" >'+ut+"<\/div><\/div><\/div><\/div><\/div>";y.innerHTML=nt;rt.appendChild(y);et=i(y);o.autoSuggListElements.push(p);et.add_event("click",function(n){return a.clickHandler(n,p)});o.feedbackTask.panelRoot.select(".me-b_vList").append(rt);o.feedbackTask.panelRoot.select(".me-b_vList").set_style({visibility:"visible"});o.numberOfSuggFetched++}l&&l.length>0?(o.showPushpin(),t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestCompletionIdentifier})):(o.showPushpin(),t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestNoResultsFound,QUERY:s}))}else t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestNoResultsFound,QUERY:s});o.isSnrRequestCompleted=!0},y=function(n){t.log(f.Feedback,t.FeedbackType_AutoSuggest,{FT:t.FeedbackType_AutoSuggest,SR:e.autoSuggestSnrErrorIdentifier,DATA:n});o.isSnrRequestCompleted=!0},h=c.dynamicProperties.market.toLowerCase(),p=u.snrSearchUrlPrefix+"?appid="+u.snrSearchAppId+"&q="+s+"&count="+u.snrSearchCount+"&mkt="+h+"&setlang="+h,b=Date.now();this.networkRequestId=ut.downloadJson(p,null,v,y,null,null,1,null,null)},e.prototype.onTaskStateChanged=function(n){var u,t;r.prototype.onTaskStateChanged.call(this,n);n.activationState===1&&a._getIsSlideCardEnabled()&&(u=this.feedbackTask.panelRoot&&this.feedbackTask.panelRoot.length?this.feedbackTask.panelRoot[0]:null,u&&(t=i("."+e._hoverClassName,u),t&&t.length>0&&(t.remove_class(e._hoverClassName),this.setShowBackToEditButton(!0))));n.activationState===1&&n.prominence===1&&this.feedbackType!==1&&!this.isSubmitted&&this.getShowSuggestions()&&this.hidePushpin()},e.prototype._getBingPlacesLink=function(n){return'<a class="bingPlacesLink" href="'+u.bingPlacesLink+'" target="_blank" aria-label="'+u.bingPlacesLink+'" role="button">'+n+"<\/a>"},e.nameValidationFailureIdentifier="RN",e.cityValidationFailureIdentifier="RC",e.addressValidationFailureIdentifier="RA",e.autoSuggestInitiationIdentifier="IN",e.autoSuggestCompletionIdentifier="CM",e.autoSuggestSnrErrorIdentifier="ERR",e.autoSuggestListingAnswerClickedIdentifier="ASL_C",e.autoSuggestListingAnswerFetchedIdentifier="ASL_F",e.autoSuggestShowSugg="SS",e.autoSuggestNoResultsFound="NR",e.autoSuggestSubmitClicked="SC",e.autoSuggestWaitForSNR="WS",e.autoSuggestBackToEditClicked="BE",e.autoSuggestSubmitDirectly="SD",e.autoSuggestSubmitAnywayClicked="SA",e.autoSuggestSNRResponseTime="RT",e._hoverClassName="hover",e}(it),bi=function(r){function e(t,i,u,f,e,o){var h=this,l=l?l:{},a;return h=r.call(this,l,t,vi,i)||this,h.feedbackType=u,h.feedbackTimeout=250,h.feedbackQueryables=f,h._query="",h._definePrivates(l),h.setIsMobile(c.isMobile),h.setSendFeedbackText(c.isMobile?n.L_Fdbk_Submit_Text:n.L_Fdbk_Send),o&&(h.initLocationOfPushpin=s.getMapCenter(o)),e&&(u===5?(h.reportType=e.reportType?e.reportType:0,e.pushPinLocation&&(h.initLocationOfPushpin=e.pushPinLocation),h._directionTaskState=e.taskState,h._query=e.query?e.query:h._directionTaskState&&h._directionTaskState.originalQuery?h._directionTaskState.originalQuery:"",e.directionStepsList&&(h._stepsList=e.directionStepsList),e.directionRouteIndex&&(h._directionRouteIndex=e.directionRouteIndex)):u===3||u===7?(h.reportType=e.reportType?e.reportType:0,h._query=e.query?e.query:"",e.pushPinLocation&&(h.initLocationOfPushpin=e.pushPinLocation),e.taskStateId&&(h._taskStateId=e.taskStateId),e.scenarioKey&&(h._scenarioKey=e.scenarioKey),e.dataFacts&&(h.dataFacts=e.dataFacts),e.userFacts&&(h.userFacts=e.userFacts),e.rapEntryPoint&&(h._rapEntryPoint=e.rapEntryPoint)):e.reportType&&(e.reportType===10||e.reportType===11)&&(h.reportType=e.reportType)),u===5&&(typeof h._stepsList=="undefined"||h._stepsList.length===0)&&(h.feedbackType=u=2),h._prePopulateAreaDropdown(u,h._query),h._showOrHideElements(),h._pinMoveRequired=!1,h.setFeedbackType(u),h.setReminderMessage(""),it.hideDragPin(h.getMap()),h.steps=new nt,h.showOrHideReturnNavButtons(h._isSlideCard(u)),h.dataFacts&&h.dataFacts.parentId&&(a=h.dataFacts.parentId,a&&a.indexOf("Detail")>-1&&h.showOrHideReturnNavButtons(!0)),h}return v(e,r),e.prototype._definePrivates=function(t){t.defineProperty("showFeedbackHeader");t.defineProperty("hideBackButton");t.defineProperty("showGeneralFeedbackPanel");t.defineProperty("showProblemOnMapPanel");t.defineProperty("showThankYouPanel");t.defineProperty("showProblemTypes");t.defineProperty("showSubProblems");t.defineProperty("showLookingforDiv");t.defineProperty("showAddressInput");t.defineProperty("showPostcodeInput");t.defineProperty("showCommentsDiv");t.defineProperty("showAddressInput");t.defineProperty("showAddMissingEntityLink");t.defineProperty("showMovePushpinMessage");t.defineProperty("showRequirePinMoveSign");t.defineProperty("showDirectionsFeedback");t.defineProperty("showStepsDiv");t.defineProperty("showRequiredArea");t.defineProperty("showRequireMessage");t.defineProperty("showSendButton");t.defineProperty("showPostRequire");t.defineProperty("showRequireComments");t.defineProperty("isMobile");t.defineProperty("sendFeedbackText");t.defineProperty("isFBBusinessNameFieldValid");t.defineProperty("isFBBusinessCityFieldValid");t.defineProperty("reminderMessage");t.defineProperty("buttonClassName");t.defineProperty("backButtonText");t.defineProperty("problemArea",this._onProblemAreaChanged);t.defineProperty("problemType",this._onProblemTypeChanged);t.defineProperty("subProblemType",this._onSubProblemTypeChanged);t.defineProperty("directionsIssueType",this._onDirectionsIssueTypeChanged);t.defineProperty("addressGhostText",null,null,{defaultValue:n.FdbkStreetGhost});t.defineProperty("userAddress",null,null,{defaultValue:""});t.defineProperty("userPostcode",null,null,{defaultValue:""});t.defineProperty("feedbackType")},e.prototype.dispose=function(){this.showOrHideReturnNavButtons(!1);r.prototype.dispose.call(this)},e.prototype.onReturnToSearchResultClick=function(n){this.showOrHideReturnNavButtons(!1);n.preventDefault();p.invokeHandler(y.taskDataHandlerKey,{action:"remove",id:this.feedbackTask.id})},e.prototype.onAddStepClick=function(n){n.preventDefault();this.addStep()},e.prototype.onProblemSendClick=function(n){var v,y,i,l,r,b;n.preventDefault();var e=this.feedbackType,p=t.FeedbackType_BaseMap,k=n.target;if(!k.classList.contains("inactive")){e&&(p=t.getFeedbackTypeLogValue(e));var u=this.getProblemArea().value,c=s.getMapBounds(this.getMap(),!1),w=s.getMapCenter(this.getMap()),d=s.getMercatorZoomLevel(this.getMap());if(e===3){if(v=!1,u===3&&(v=this.getNotFoundType()===0),!this._validateNoResultFeedbackForm(v,this.commentsFeedback,!0))return}else if(e===7){if(!this._validateNoResultFeedbackForm(!1,this.commentsFeedback,!0))return}else if(e===5){if(!this._validateDirectionsInputs(this.getDirectionsIssueType().value))return}else if(this._checkAndCreateError(e))return;y=this.getMap().getMapType().displayName;this.getProblemType().value===34&&(y="streetside");i={FORM:o.getStarGateForm(u),MapStyle:y,MapViewBoundingBox:{NELatLon:{Latitude:c.getNorth(),Longitude:c.getEast()},SWLatLon:{Latitude:c.getSouth(),Longitude:c.getWest()}},MapViewCenter:{Latitude:w.latitude,Longitude:w.longitude},Zoom:d,FeedbackType:o.FeedbackType_DSAT,Query:this._query};i.Scenario=o.getStargateScenario(u);this.feedbackQueryables&&this.feedbackQueryables.keywords.length>2?(l=this.feedbackQueryables.keywords[2],l&&(i.IssueEntity={Geolocation:{latitude:l.latitude,longitude:l.longitude}})):this.showPushpinReminderMessage&&(i.IssueEntity={GeoLocation:{latitude:this.initLocationOfPushpin.latitude,longitude:this.initLocationOfPushpin.longitude}});u===5?(i.IssueEntityType=o.getDirectionsIssue(this.getDirectionsIssueType().value),this._insertDirectionsJSON(i)):(u===3||u===4?this._insertSearchJSON(i):(i.IsPushpinMoved=this.isPushpinMoved,this.isPushpinMoved&&(i.SuggestedEntity={GeoLocation:{Latitude:this.getPushpinLocation().latitude,Longitude:this.getPushpinLocation().longitude}})),r=null,o.hasProblemType(u)&&(r=this.getProblemType().value,i.IssueEntityType=o.getStargateIssueEntityType(r)),r&&o.hasSubProblem(r)&&(i.Issue=o.getStargateIssueValue(this.getSubProblemType().value)));i.UserComment=a._decodeHTML(this.commentsFeedback);this.feedbackQueryables&&(r=this.getProblemType().value,r===11||r===12?i.keywords=et([],this.feedbackQueryables.keywords,!0):r===34&&(b=this.feedbackQueryables.keywords.splice(0,2),i.keywords=et([],b,!0)));this.feedbackTask.sendSurfFeedback(i,"","");h.defaultScenario(2);this.feedbackQueryables=null;this._showOrHideElements();this.setShowThankYouPanel(!0);this._focusInThankYouPanel();this.isSubmitted=!0;t.log(f.Feedback,"S",{FT:p,SR:"SM",RP:this._rapEntryPoint?this._rapEntryPoint:""})}},e.prototype.showOrHideReturnNavButtons=function(n){var r,u,f,t,e;if(this.setHideBackButton(n),r=i(".returnArrowDiv",this.getControl()[0]),u=this.getFeedbackType(),u===7||u===3||u===5)for(f=i(".stickyFiltersRoot"),t=0;t<f.length;t++)e=i(f[t]),f[t].classList.contains("slideout")&&(n?(r.remove_class("hide"),e.add_class("hide")):(r.add_class("hide"),e.remove_class("hide"))),u===7&&(f[t].classList.contains("slideout")||(n?(r.remove_class("hide"),e.add_class("hide")):(r.add_class("hide"),e.remove_class("hide"))))},e.prototype.onTaskStateChanged=function(n){this.feedbackType!==5||this.getDirectionsIssueType().value>=10||this.getDirectionsIssueType().value===7?r.prototype.onTaskStateChanged.call(this,n):(this.hidePushpin(),n.animationState===1&&this.setFocusToDefaultElement())},e.prototype.onBlurFBRequiredInputField=function(){this._validateNoResultFeedbackForm(this.getNotFoundType()===0,this.commentsFeedback,!1)},e.prototype.addStep=function(){var n=this,t=new di(this._stepsList,this);this.steps.insert(t);t.stepChanged.addOne(function(){n.setButtonClassName(n._disableSendButton(!1))})},e.prototype.updateDragPin=function(n,t){r.prototype.updateDragPin.call(this,n,t)},e.prototype._focusInThankYouPanel=function(){r.prototype._focusInThankYouPanel.call(this)},e.prototype.onFeedbackDoneClick=function(n){if(n.preventDefault(),this.getHideBackButton()||this.feedbackType!==2)this.onReturnToSearchResultClick(n);else p.invokeHandler(y.taskDataHandlerKey,{action:"removeStackForTask",id:this.feedbackTask.id}),c.isMobile&&i("#feedbackWrapper").add_class("collapsed")},e.prototype._isSlideCard=function(n){return n===5||n===4||n===3||n===7?!0:!1},e.prototype._prePopulateAreaDropdown=function(t,i){var u,f,r;this.problemAreas=h.buildScenarioDropDown(t,this.reportType,i);u=[];this.problemTypes=new nt(u);f=[];this.subProblemTypes=new nt(f);r=this.feedbackQueryables;r&&r.keywords&&r.keywords.length>0?(t=2,this.setProblemArea({text:n.FdbkAreaMap,value:1})):this.setProblemArea(h.defaultScenario(this.feedbackType,this._query))},e.prototype._onProblemAreaChanged=function(t,i){var r,e,o,f;i!==null&&(r=i.value,this.setBackButtonText(n.L_Fdbk_ReturnToSearchResult),this.setProblemType({text:n.L_Fdbk_SelectSubProblem,value:0}),this.setButtonClassName(this._disableSendButton(!0)),r===5?(this.feedbackType=5,e=this._directionTaskState&&this._directionTaskState.waypoints,o=this._directionTaskState&&this._directionTaskState.mode===b.transit,this.directionsIssueTypes=h.buildDirectionsIssues(e,o),this.setDirectionsIssueType(h.defaultDirectionsIssue()),this._showOrHideElements(r),this.setBackButtonText(n.ReturnToDirections)):r===2||r===6?(this.feedbackType=r===2?2:3,this.problemTypes.clear(),this._showOrHideElements(r)):r===3?(this.feedbackType=3,this.problemTypes.clear(),this.problemTypes.insertAll(h.buildProblemType(i.value,this.reportType)),this._showOrHideElements(r),this.setProblemType(h.setDefaultProblemType())):r===1?(this.feedbackType=2,this.problemTypes.clear(),f=this.feedbackQueryables,this.problemTypes.insertAll(h.buildProblemType(i.value,this.reportType,f)),this._showOrHideElements(r),f&&f.keywords&&f.keywords.length&&(f.keywords.indexOf("flyOver")>-1?this.setProblemType(h.setDefaultProblemType(11)):f.keywords.indexOf("3dlandmarks")>-1?this.setProblemType(h.setDefaultProblemType(12)):(u===null||u===void 0?void 0:u.enableStreetsideFdbk)&&f.keywords.indexOf("Streetside")>-1&&this.setProblemType(h.setDefaultProblemType(34)))):(this.feedbackType=2,this.problemTypes.clear(),this.problemTypes.insertAll(h.buildProblemType(i.value,this.reportType)),this._showOrHideElements(r),this.setProblemType(h.setDefaultProblemType())))},e.prototype._onProblemTypeChanged=function(t,i){if(i!==null){this.getSubProblemType&&this.subProblemTypes.clear();this.setSubProblemType({text:n.L_Fdbk_SelectSubProblem,value:0});var r=i.value,u=this.feedbackQueryables;if(r===35||r===30||r===19||r===28||r===22||r===26||r===25||r===27||r===24||r===20||r===21||r===2||r===29||r===23||r===14||r===17||r===3){this._showOrHideElements(null,i.value);return}r===11?u&&u.keywords&&u.keywords.length&&u.keywords.indexOf("flyOver")>0&&(this.setProblemType({text:n.FdbkProblemFlyover,value:11}),this._showOrHideElements(this.getProblemArea().value,r)):r===12?(u&&u.keywords?u.keywords.length===0&&(u.keywords=["3dlandmarks"]):this.feedbackQueryables={keywords:["3dlandmarks"]},this.setProblemType({text:n.FdbkProblemFlyover,value:12}),this._showOrHideElements(this.getProblemArea().value,r)):r===34?(u&&u.keywords?u.keywords.length===0&&(u.keywords=["streetside"]):this.feedbackQueryables={keywords:["streetside"]},this.setProblemType({text:n.StreetsideMapStyle,value:34}),this.subProblemTypes.insertAll(h.buildSubProblemDropDownItems(i.value)),this._showOrHideElements(this.getProblemArea().value,r)):(this.subProblemTypes.clear(),this.subProblemTypes.insertAll(h.buildSubProblemDropDownItems(i.value)),this._showOrHideElements(this.getProblemArea().value,i.value))}},e.prototype._onSubProblemTypeChanged=function(n,t){var i=t.value;this._showOrHideElements(this.getProblemArea().value,this.getProblemType().value,null,i)},e.prototype._onDirectionsIssueTypeChanged=function(n,t){var i,r;t&&(this._showOrHideElements(null,null,t.value),t.value>=10?(i=this._directionTaskState.waypoints,this.showPushpin(),this.initLocationOfPushpin=i[this.getDirectionsIssueType().value-10].point,this.updatePushpin(this.initLocationOfPushpin),this.showPushpin(),this.showPushiPinTip(!0),this.setShowRequirePinMoveSign(!0)):t.value===7?(r=s.getMapCenter(this.getMap()),this.showPushpin(),this.initLocationOfPushpin=r,this.updatePushpin(this.initLocationOfPushpin),this.showPushpin(),this.showPushiPinTip(!0),this.setShowRequirePinMoveSign(!0)):t.value===2?(this.showPushpin(),this.showPushiPinTip(!0),this.setShowRequirePinMoveSign(!1)):(this.showPushiPinTip(!1),this.setShowRequirePinMoveSign(!1),this.hidePushpin()))},e.prototype.getNotFoundType=function(){var t=this.getProblemType(),n=t&&t.value;return n===28?2:n===30?1:n===29?3:n===35?4:0},e.prototype._insertDirectionsJSON=function(n){var r=null,u=null,f=null,l=1,a=b.driving,v=ft.departure,e,s,c,t,i;if(this._directionTaskState&&(this._directionTaskState.waypoints&&(f=this._directionTaskState.waypoints,r=this._directionTaskState.waypoints[0],u=this._directionTaskState.waypoints[this._directionTaskState.waypoints.length-1]),this._directionTaskState.options&&(this._directionTaskState.options.unit!==bt.miles&&(l=0),v=this._directionTaskState.options.timeType),a=this._directionTaskState.mode),r&&(n.From=this._getWayPointString(r),n.GeocodedFrom=this._getWayPointString(r),r.point&&(n.GeocodedFromLatLong={Latitude:r.point.latitude,Longitude:r.point.longitude})),u&&(n.To=this._getWayPointString(u),n.GeocodedTo=this._getWayPointString(u),u.point&&(n.GeocodedToLatLong={Latitude:u.point.latitude,Longitude:u.point.longitude})),this.getDirectionsIssueType().value===1){for(e={},t=0;t<this.steps.length;t++)s=t+1,e["Step"+s]={StepIndex:s,ProblemDetails:this.steps[t].getCommentsDirectionsStep(),StepDescription:this.steps[t].getDirectionsIssueStep().value};for(n.InaccurateSteps=e,n.DirectionsRouteRequest={AvoidOption:!1,DistanceUnitOption:l,MaxSolutionsOptions:3,OptimizeOption:"Time",RouteIndex:this._directionRouteIndex,RouteModeOption:h.GetDirectionsMode(a),TimeTypeOption:h.GetDirectionsTimeType(v)},c={},t=0;t<f.length;t++)i=f[t],i&&(c["WayPoint"+t]={Address:this._getWayPointString(i),IsViaPoint:!1,Latitude:i.point.latitude,Longitude:i.point.longitude});n.DirectionsRouteRequest.WayPoints=c}else this.getDirectionsIssueType().value>=10?(f&&(i=f[this.getDirectionsIssueType().value-10],i.point&&(n.IssueEntity={GeoLocation:{Latitude:i.point.latitude,Longitude:i.point.longitude},Identifier:{Identifier:o.Identifier_Unknown},Name:i.name})),n.SuggestedEntity={GeoLocation:{Latitude:this.getPushpinLocation().latitude,Longitude:this.getPushpinLocation().longitude}}):this.getDirectionsIssueType().value===7&&(n.SuggestedEntity={GeoLocation:{Latitude:this.getPushpinLocation().latitude,Longitude:this.getPushpinLocation().longitude}});return n},e.prototype._insertSearchJSON=function(n){var r=this.getProblemArea().value===3,u=this._validateNoResultFeedbackForm(this.getProblemType().value===0,this.commentsFeedback,!0),i,t;if(u)return i=this.getNotFoundType(),t="",r?i===1&&(t=o.getStargateNoResultType(this.getNotFoundType())):(this.reportType===2||this.reportType===3)&&(t=o.getStargateNoResultType(this.getNotFoundType())),n.SuggestedEntity={GeoLocation:{Latitude:this.getPushpinLocation().latitude,Longitude:this.getPushpinLocation().longitude},SuggestedEntityType:t},n.IsPushpinMoved=this.isPushpinMoved(),n.ScenarioKey=this._scenarioKey,this.reportType===2||this.reportType===3?n.IssueEntity={GeoLocation:{Latitude:this.initLocationOfPushpin.latitude,Longitude:this.initLocationOfPushpin.longitude},Name:this.feedbackTask.getTitle()}:this.reportType===5&&(n.IssueEntity={GeoLocation:{Latitude:this.initLocationOfPushpin.latitude,Longitude:this.initLocationOfPushpin.longitude},Name:this.feedbackTask.getTitle(),Identifier:{Identifier:this._taskStateId}}),r&&i===2&&(n.SuggestedEntity.Address={AddressLine:this.businessAddress,City:this.businessCity,PostalCode:this.businessPostalCode,Subdivision:this.businessState},n.SuggestedEntity.Name=this.businessName,n.SuggestedEntity.PrimaryPhone=this.businessPhone,n.SuggestedEntity.PrimaryWebsite=this.businessWebsite),n.ServerSideAPIEnabled=!0,this._rapEntryPoint&&(n.rapentrypoint=this._rapEntryPoint,n.rappartner="MapsV8"),n},e.prototype._checkAndCreateError=function(i){var u=!1,s=this.getProblemArea().value,r=o.hasProblemType(s)?this.getProblemType().value:null,e=o.hasSubProblem(r)?this.getSubProblemType().value:null,h;return s===0?u=this._showMessagePanel(!0,n.L_Fdbk_ProblemArea_Reminder):s===1&&(r===4||r===5)?e===null||e===0?u=this._showMessagePanel(!0,n.L_Fdbk_ProblemType_Reminder):e===4||e===3?this.getUserAddress().length===0&&(u=this._showMessagePanel(!0,n.L_Fdbk_ReportAProblemOnMap_Reminder)):e===2||e===1?this.getUserPostcode().length===0&&(u=this._showMessagePanel(!0,n.L_Fdbk_ReportAProblemOnMap_Reminder)):this.isEmptyFeedbackComment()&&this.getShowRequireComments()&&(u=this._showMessagePanel(!0,n.L_Fdbk_ReportAProblemOnMap_Reminder)):s===1?((r===null||r===0)&&(u=this._showMessagePanel(!0,n.FdbkProblemError)),r!==null&&(r===19||r===11||r===12||r===34||r===2||r===14||r===3?this.isEmptyFeedbackComment()&&this.getShowRequireComments()&&(u=this._showMessagePanel(!0,n.L_Fdbk_ReportAProblemOnMap_Reminder)):!1||e===0?u=this._showMessagePanel(!0,n.FdbkSubProblemError):this.isEmptyFeedbackComment()&&this.getShowRequireComments()&&(u=this._showMessagePanel(!0,n.L_Fdbk_ReportAProblemOnMap_Reminder)))):s===7?((r===null||r===0)&&(u=this._showMessagePanel(!0,n.FdbkProblemError)),r!==null&&r===18?!1||e===0?u=this._showMessagePanel(!0,n.FdbkSubProblemError):this.isEmptyFeedbackComment()&&this.getShowRequireComments()&&(u=this._showMessagePanel(!0,n.L_Fdbk_ReportAProblemOnMap_Reminder)):this.isEmptyFeedbackComment()&&this.getShowRequireComments()&&(u=this._showMessagePanel(!0,n.L_Fdbk_ReportAProblemOnMap_Reminder))):this.isEmptyFeedbackComment()&&this.getShowRequireComments()&&(u=this._showMessagePanel(!0,n.L_Fdbk_ReportAProblemOnMap_Reminder)),u&&(h=t.FeedbackType_BaseMap,i&&(h=t.getFeedbackTypeLogValue(i)),t.log(f.Feedback,"S",{FT:h,SR:"RI"})),u},e.prototype._validateDirectionsInputs=function(i){var r=!0,u=n.L_Fdbk_GeneralFeedback_Reminder;return i===0?(u=n.L_Fdbk_ProblemType_Reminder,r=!1):i>=10||i===7?this.getShowRequirePinMoveSign()&&!this.isPushpinMoved()&&(r=!1,u=n.FdbkAddressErrorWithPin):i===1&&this.steps.length===0?r=!1:(i===2||i===6||i===4)&&this.isEmptyFeedbackComment()&&(r=!1,u=n.L_Fdbk_ReportAProblemOnMap_Reminder),r||(this._showMessagePanel(!0,u),t.log(f.Feedback,"S",{FT:t.FeedbackType_Directions,SR:"RI"})),r},e.prototype._validateNoResultFeedbackForm=function(i,r,u){var e=!0,s,o="",h=this.getProblemArea()&&this.getProblemArea().value,c=this.getProblemType()&&this.getProblemType().value,a=this.getNotFoundType(),l=this.getShowMovePushpinMessage();return i?(o=n.L_Fdbk_ReportAProblemOnMap_Reminder,s="RI",e=!1):h&&h!==3?h!==4||c&&c!==25?h===6&&this.getShowRequireComments()&&this.isEmptyFeedbackComment()&&(o=n.L_Fdbk_ReportAProblemOnMap_Reminder,e=!1):c?l&&!this.isPushpinMoved()&&this.getShowRequirePinMoveSign()&&(o=n.FdbkAddressErrorWithPin,s="RP",e=!1):(o=n.L_Fdbk_ProblemType_Reminder,e=!1,s="RP"):c===28?(this.businessName===null||this.businessName.length===0?(o=n.L_Fdbk_BusinessNotFound_RequiredFields_Missing_ErrorMessage,s="RI",e=!1,this.setIsFBBusinessNameFieldValid(!1)):this.setIsFBBusinessNameFieldValid(!0),this.businessCity===null||this.businessCity.length===0?(o=n.L_Fdbk_BusinessNotFound_RequiredFields_Missing_ErrorMessage,s="RI",e=!1,this.setIsFBBusinessCityFieldValid(!1)):this.setIsFBBusinessCityFieldValid(!0)):this.isEmptyFeedbackComment()?(o=n.L_Fdbk_ReportAProblemOnMap_Reminder,e=!1):this.reportType===3&&l&&!this.isPushpinMoved()&&this.getShowRequirePinMoveSign()&&(o=n.FdbkAddressErrorWithPin,e=!1),e?this._showMessagePanel(!1):(this._showMessagePanel(!0,o),t.log(f.Feedback,u?"S":t.InlineValidationFailure,{FT:t.FeedbackType_SearchResult,SR:s,RE:this._rapEntryPoint?this._rapEntryPoint:""})),e},e.prototype.isEmptyFeedbackComment=function(){return!this.commentsFeedback||this.commentsFeedback.length===0||this.isNullOrWhitespace(this.commentsFeedback)},e.prototype.isNullOrWhitespace=function(n){return typeof n=="undefined"||n==null?!0:n.replace(/\s/g,"").length<1},e.prototype._disableSendButton=function(n){return n?"textButton inactive":"textButton"},e.prototype._showMessagePanel=function(n,t){return n?(this.setShowMessagePanel(!0),this.setReminderMessage(t)):(this.setShowMessagePanel(!1),this.setReminderMessage("")),n?n:!1},e.prototype._getWayPointString=function(n){return n.name&&n.address?n.name+","+n.address:n.name?n.name:n.address},e.prototype._showOrHideElements=function(t,i,r,u){if(this.setShowMovePushpinMessage(!1),this.setShowRequirePinMoveSign(!1),this.setShowProblemTypes(!1),this.setShowSubProblems(!1),this.setShowThankYouPanel(!1),this.setShowStepsDiv(!1),this.setShowPostcodeInput(!1),this.setShowLookingforDiv(!1),this.setShowAddressInput(!1),this.setShowCommentsDiv(!1),this.setShowDirectionsFeedback(!1),this.setShowAddMissingEntityLink(!1),this.setShowMessagePanel(!1),this.setShowPostRequire(!1),this.setShowRequireComments(!1),this.setShowRequiredArea(!0),this.setShowRequireMessage(!0),this.setShowSendButton(!0),this.hidePushpin(),t||(t=this.getProblemArea().value),t)switch(t){case 5:this.setShowDirectionsFeedback(!0);break;case 2:this.setShowMovePushpinMessage(!0);this.showPushpin();this.showPushiPinTip(!0);this.setShowCommentsDiv(!0);break;case 6:this.setShowMovePushpinMessage(!0);this.showPushpin();this.showPushiPinTip(!0);this.setShowCommentsDiv(!0);this.setShowRequireComments(!0);break;case 3:case 1:case 4:case 7:this.setShowProblemTypes(!0)}if(t!==1||i||(i=this.getProblemType().value),i){this.setShowProblemTypes(!0);switch(i){case 19:case 22:case 24:case 20:case 23:case 21:case 35:case 14:case 17:case 3:this.setShowCommentsDiv(!0);this.setShowRequireComments(!0);break;case 2:case 30:case 29:this.setShowMovePushpinMessage(!0);this.setShowRequirePinMoveSign(!1);this.showPushiPinTip(!0);this.showPushpin();this.setShowCommentsDiv(!0);this.setShowRequireComments(!0);break;case 25:case 32:case 33:this.setShowMovePushpinMessage(!0);this.setShowRequirePinMoveSign(!0);this.showPushiPinTip(!0);this.showPushpin();this.setShowCommentsDiv(!0);break;case 26:case 27:this.setShowCommentsDiv(!0);this.setShowRequireComments(!0);break;case 22:this.setShowCommentsDiv(!0);this.setShowRequireComments(!0);break;case 28:this.setShowLookingforDiv(!0);this.setShowMovePushpinMessage(!0);this.setShowRequirePinMoveSign(!1);this.showPushiPinTip(!0);this.showPushpin();this.setIsFBBusinessNameFieldValid(!1);this.setIsFBBusinessCityFieldValid(!1);break;case 4:case 5:case 10:case 7:case 8:case 9:case 6:case 13:case 18:case 16:case 1:case 15:case 34:this.setShowSubProblems(!0);break;case 11:this.setShowCommentsDiv(!0);this.setShowRequireComments(!0);break;case 12:case 35:this.setShowCommentsDiv(!0);break;case 31:this.setAddressGhostText(n.FdbkNumberAndStreetGhost);this.setShowAddressInput(!0);this.setShowPostcodeInput(!0);this.setShowMovePushpinMessage(!0);this.showPushiPinTip(!0);this.showPushpin();this.setShowCommentsDiv(!0)}}if(r){this.setShowDirectionsFeedback(!0);r>10&&(r=10);switch(r){case 1:this.setShowStepsDiv(!0);this.setShowMovePushpinMessage(!1);this.steps.length===0&&this.addStep();break;case 10:this.setShowMovePushpinMessage(!0);this.setShowRequirePinMoveSign(!0);this.setShowCommentsDiv(!0);break;case 6:case 4:case 2:this.setShowRequireComments(!0);this.setShowCommentsDiv(!0);break;case 7:this.setShowMovePushpinMessage(!0);this.setShowRequirePinMoveSign(!0);this.showPushpin();this.setShowCommentsDiv(!0);break;default:this.setShowCommentsDiv(!0)}}u&&(u===4?(this.setAddressGhostText(n.FdbkNumberAndStreetGhost),this.setShowAddressInput(!0),this.setShowPostcodeInput(!0),this.setShowMovePushpinMessage(!0),this.showPushiPinTip(!0),this.showPushpin(),this.setShowCommentsDiv(!0)):u===2||u===1?(this.setShowPostcodeInput(!0),this.setShowPostRequire(!0),this.setShowCommentsDiv(!0)):u===58?this._showMessagePanel(!0,n.ReportAProblemInstruction):this.getProblemArea().value===1&&this.getProblemType().value!==34?(this.setShowMovePushpinMessage(!0),this.showPushiPinTip(!0),this.showPushpin(),this.setShowRequireComments(!0),this.setShowCommentsDiv(!0)):this.getProblemArea().value===1&&this.getProblemType().value===34?(this.setShowMovePushpinMessage(!1),this.showPushiPinTip(!0),this.hidePushpin(),this.setShowRequireComments(!0),this.setShowCommentsDiv(!0)):this.getProblemType().value===18?(this.setShowRequireComments(!0),this.setShowCommentsDiv(!0)):this.setShowCommentsDiv(!0));this.setButtonClassName(this._disableSendButton(!this.getShowCommentsDiv()&&!this.getShowAddressInput()&&!this.getShowPostcodeInput()&&!this.getShowLookingforDiv()))},e}(it),ki=function(i){function r(n,t,r,u,f,e,o){var s=i.call(this,f)||this;return s.map=t,s._mapsFeedback=r,s.type=w.feedbackTask,s.displayState={colorIndex:5,groupName:"Feedback"},s._geoLocationProvider=u,s.geoCoder=e,s.reverseGeocoder=o,s._controlTemplateFactory=n,s._initFeedbackFocus=new k,s.onCloseClick=new k,s._searchImpressionGuids=[],s._traceIds=[],!c.isMobile&&r&&(r.takeScreenShot(),r.generateReproUrl()),s.onCloseClick.add(function(){return s._onCloseClick()}),s}return v(r,i),r.prototype.activate=function(r,u){var s=this,e=2,o;u&&(this._taskState=u,e=u.feedbackTaskType);this.setTitle(n.L_Fdbk_Link);u&&u.title&&u.title.length>0&&u.options&&(!u.options.query||u.options.query.length===0)&&(u.options.query=u.title);e===1?(this._currentViewModel=new gi(this._controlTemplateFactory,this,e,u.queryables),this._currentViewModel.setShowFeedbackHeader(u&&u.options&&u.options.showFeedbackHeader),this._initFeedbackFocus.add(function(){s._currentViewModel.setFocusToDefaultElement()})):e===6?(this._currentViewModel=new wi(this._controlTemplateFactory,this,u.options),this._currentViewModel.showPushpin()):(this._currentViewModel=new bi(this._controlTemplateFactory,this,e,u.queryables,u.options,this.map),this._initFeedbackFocus.add(function(){s._currentViewModel.setFocusToDefaultElement()}));i.prototype.activate.call(this,r,u);o=this._currentViewModel.getControl();o&&this.addControl(o);this._initFeedbackFocus.invoke();t.log(f.Feedback,"A",{EP:t.getEntryPointLogValue(u.entryPoint),FT:t.getFeedbackTypeLogValue(e)});this.setPercentLoaded(1)},r.prototype.deactivate=function(){i.prototype.deactivate.call(this);this._currentViewModel.removePushPin();this._currentViewModel.dispose();t.log(f.Feedback,"D",{FT:t.getFeedbackTypeLogValue(this._currentViewModel.feedbackType),FI:this._currentViewModel.isSubmitted?"SM":this._currentViewModel.hasInput(this._currentViewModel.feedbackType)?t.LogValue_True:t.LogValue_False,RE:this._taskState&&this._taskState.options&&this._taskState.options.rapEntryPoint?this._taskState.options.rapEntryPoint:""})},r.prototype.processCallback=function(n){var r,i,t,e,u,f;if(n.outData)for(r=n.outData,i=0;i<r.length;i++)t=r[i].data,t&&(e=r[i].processorId===this._taskState.activeTaskId,t.ImpressionGuid?(u=t.ImpressionGuid,u=e?t.ImpressionGuid+"|Active":t.ImpressionGuid,this._searchImpressionGuids.indexOf(u)===-1&&this._searchImpressionGuids.push(u)):this._searchImpressionGuids.push(_G.IG),t.TraceId&&(f=t.TraceId,e&&(f=t.TraceId+"|Active"),this._traceIds.indexOf(f)===-1&&this._traceIds.push(f)))},r.prototype.serialize=function(){return this._taskState},r.prototype.setDisplayState=function(n){var t,r;i.prototype.setDisplayState.call(this,n);this._currentViewModel&&this._currentViewModel.onTaskStateChanged(n);(n.activationState===1&&n.prominence===1||n.animationState===1)&&(t={trackingDataRequested:!0},this._callProcess(t,w.localListingTask),this._callProcess(t,w.localDetailsTask),r={action:1},this._callProcess(r,w.directionsTask))},r.prototype._callProcess=function(n,t){var i={requestorType:w.feedbackTask,requestorId:this.id,type:t,requestState:n,useActiveTasks:!0};p.invokeHandler(y.taskProcessDataHandlerKey,i)},r.prototype.getCardIconInfo=function(){return{iconClass:"fdbTsk"}},r.prototype.isSharable=function(){return!1},r.prototype.hasDefaultFocusElement=function(){return!0},r.prototype.sendLocalFeedback=function(n,t,i){i===void 0&&(i=1);this._mapsFeedback&&this._mapsFeedback.sendLocalFeedback(n,t,i)},r.prototype.sendSurfFeedback=function(n,t,i){n.SearchImpressionGuid=this._searchImpressionGuids.join(" & ");n.TraceID=this._traceIds.join(" & ");this._mapsFeedback&&this._mapsFeedback.sendSurfFeedback(n,t,i,{})},r.prototype._onCloseClick=function(){var n=this._mapsFeedback.getActiveTask();p.invokeHandler(y.taskDataHandlerKey,{id:n.id,action:"removeTaskAndReseatChild"});this.deactivate()},r}(vt),t=function(){function n(){}return n.log=function(n,t,i,r){p.invokeHandler(y.instrumentationDataHandlerKey,{logData:{feature:n,action:t,data:i},flush:r})},n.getFeedbackTypeLogValue=function(t){var i=n.FeedbackType_General;return t===2?i=n.FeedbackType_BaseMap:t===3?i=n.FeedbackType_SearchResult:t===4?i=n.FeedbackType_LocalResult:t===6?i=n.FeedbackType_MissingEntity:t===7&&(i=n.FeedbackType_RealEstate),i},n.getEntryPointLogValue=function(t){var i=n.EntryPointType_PreviewWidget;return t===1?n.EntryPointType_Footer:t===3?i=n.EntryPointType_TaskLink:t===2?i=n.EntryPointType_TaskMenu:t===6&&(i=n.EntryPointType_TaskBarMenu),i},n.OpenPopoutMenu="O",n.OpenExternalLink="E",n.MissingBusinessReported="MBR",n.InlineValidationFailure="V",n.EntryPointType_PreviewWidget="PW",n.EntryPointType_Footer="F",n.EntryPointType_TaskMenu="TM",n.EntryPointType_TaskLink="TL",n.EntryPointType_FeedbackLink="FL",n.EntryPointType_TaskBarMenu="TB",n.FeedbackType_General="G",n.FeedbackType_BaseMap="B",n.FeedbackType_SearchResult="S",n.FeedbackType_Directions="D",n.FeedbackType_LocalResult="L",n.FeedbackType_MissingEntity="ME",n.FeedbackType_RealEstate="RE",n.LogValue_True="T",n.LogValue_False="F",n.FeedbackType_AutoSuggest="AS",n}(),ot=function(e){function o(t,u,f,o){var s=e.call(this)||this,l,y;if(s.resources=n,s._mapsFeedback=t,s._map=t.getMap(),s._taskbar=o,l=r.GlobalConfig.features,y=l.optIn,s._entryPoint=7,s.disposables.push(s._map.viewChanged.add(function(){s._map.isPanning()||s.hideMenu(!0)})),s.disposables.push(s._map.mapTapped.add(function(){return s.hideMenu(!0)})),s.disposables.push(s._map.mapZoomStarted.add(function(){return s.hideMenu(!0)})),s.disposables.push(s._map.primitiveTapped.add(function(){return s.hideMenu(!0)})),s.disposables.push(s._map.mapTapped.add(function(){s.hideMenu(!0)})),s.disposables.push(s._map.mapPanStarted.add(function(){s.hideMenu(!0)})),o&&(s.disposables.push(o.feedbackInitialize.add(function(n){s.startFeedbackTask(n,6)})),s.disposables.push(o.dismissFeedbackMenu.add(function(){s.hideMenu()})),s.disposables.push(o.focusFeedbackMenu.add(function(){s._onEnter()}))),s.setTemplate(new pt(hi,{onFeedbackClick:function(n){var t,r,u,f;n.preventDefault();s.menuOpen=!0;t=s._mapsFeedback.getActiveTask();r=t&&t.getReportType?t.getReportType()===4:!1;s.feedbackClick=!r;u=s.isFromStreetside();f=u?10:7;s.startFeedbackTask(i(n.target),f,n)},onMouseOver:function(n){n.preventDefault();s.menuOpen=!0;var t=s._mapsFeedback.getActiveTask(),r=t&&t.getReportType?t.getReportType()===4:!1;s.feedbackClick=!r;i(".bm_feedbackBetaButton").add_class("hover");s.feedbackClick||s.isFromStreetside()||s.startFeedbackTask(i(n.target),7)},onMouseOut:function(){s.hideMenu(s.feedbackClick);s.feedbackClick=!1;i(".bm_feedbackBetaButton").remove_class("hover")},onMouseMove:function(n){n.preventDefault();n.stopPropagation()},onKeydown:function(n){var u=n,f,e,t,r,o,h,c,l;if(u.keyCode)if(u.keyCode===9&&a._isLargeMapShownOnSerp()&&!u.shiftKey){if(f=i(".copyrightLink"),f.length>0&&f.get_style("display")!=="none")f[0].focus();else{for(e=i(".titleBar"),t=null,r=0;r<e.length;r++)if(i(e[r]).get_style("display")!=="none"){t=i(e[r]).select(".title");t.length>0&&t[0].focus();break}t&&t.length!==0||(o=i(".taskCard.focus"),h=i(".bm_cardClose",o[0]),h.length>0?(c=i(".bm_cardCloseButton",h[0]),c.length>0&&c[0].focus()):(l=i(".feedbackBackButton",o[0]),l.length>0&&l[0].focus()))}n.preventDefault();n.stopImmediatePropagation()}else u.keyCode===13&&(n.preventDefault(),n.stopImmediatePropagation(),s.menuOpen=!0,s.feedbackClick=!0,s.startFeedbackTask(i(n.target),7))},displayControl:function(){return""}})),t.getMap()){s.disposables.push(t.getMap().mapModeChanged.add(function(n){s._showFeedbackMapModeChanged(n.newMode,u)}));s.disposables.push(t.getMap().mapTypeChanged.add(function(n){s._showFeedbackOnMapTypeChanged(n,u)}));var v=t.getMap().getMode(),c=t.getMap().getMapType(),h=v&&v.mapModeType!==2;h&&(h=c&&c.id!==d.birdseye&&c.id!==d.birdseyeV2);s.showHideFeedback(h,u);s.showBetaButton(h)}return s._initFeedbackPopoutMenu(),s.menuOpen=!1,s.feedbackClick=!1,s}return v(o,e),o.prototype.isFromStreetside=function(){return this._map&&this._map.getMode&&this._map.getMode().mapModeType===2},o.prototype._showFeedbackOnMapTypeChanged=function(n,t){var i=!n||n.newMapTypeId!==d.birdseye&&n.newMapTypeId!==d.birdseyeV2;this.showHideFeedback(i,t);this.showBetaButton(i)},o.prototype._showFeedbackMapModeChanged=function(n,t){var i=!n||n!==2;this.showHideFeedback(i,t);this.showBetaButton(i)},o.prototype.showHideFeedback=function(n,t){if(t&&t.length!==0||(t=i("#sb_feedback")),t&&t.length!==0){var r=i("#fbpgbt");r.length>0&&r.get_style("display")!=="none"&&r.set_style({display:"none"});u.showBetaButton&&this.getRootElement().set_style({display:n?"block":"none"});t.set_style({display:n?"inline":"none"})}},o.prototype.showBetaButton=function(n){var t=a._isSmallMapShownOnSerp()?!0:!1,i=!u.showBetaButton||!n||t;this.getRootElement().set_style({display:i?"none":"flex"})},o.prototype.closeStreetside=function(n){this._map.setMapType(n.getPreviousMapType());this._map.setMode(n.getPreviousMode())},o.prototype.getStreetsideMode=function(){var n=this._map.getContainer();return n.instance("StreetsideMode")},o.prototype.startFeedbackTask=function(r,e,o){var h,v,y,w;this._entryPoint=e;var l=this.isFromStreetside(),b=e===7||e===10,p=l?this.getStreetsideMode():null;if(l&&!b)window.open(i(".streetsideReportAProblemText").get_attr("href"),"_blank");else{var s=this._mapsFeedback.getActiveTask(),c=s&&s.id,k=c&&c.length>0;if(k&&c.indexOf("Feedback")>-1){l&&this.closeStreetside(p);return}this.feedbackClick||l?(l&&this.closeStreetside(p),this.menuOpen=!1,this._mapsFeedback.menuClickOpen=!1,this._feedbackButtonClickHandler(o,s,e)):(this.feedbackClick=!1,h=[],v=u.teolinOptOutLink,v&&v.length>0&&h.push(this._createOptOutLink(v)),s&&s.isReportable()&&(y=s.getReportOptions(),s.getReportType()===4?h.push(this._getListData(4,e,s.getTitle(),c,s.id,s.getLocalReportOptions())):s.getReportType()===8?h.push(this._getListData(7,e,s.getTitle(),c,s.id,y)):h.push(this._getListData(s.getReportType()===7?5:3,e,s.getTitle(),c,s.id,y))),h.push(this._getListData(2,e,n.L_Fdbk_ReportAProblem,c)),this._menuListDropdownViewModel?(this._menuListDropdownViewModel.setDropdown(h),this._menuListDropdownViewModel.setButtonElement(r),this._popOutButtonViewModel.setDropdown(this._menuListDropdownViewModel)):(this._menuListDropdownViewModel=new gt(r),this._menuListDropdownViewModel.setDropdown(h),this._popOutButtonViewModel=new oi(this._menuListDropdownViewModel),w=this._popOutButtonViewModel.buildPopOut(),this._feedbackPopoutMenuElement.append(w)),this._showMenu(h,r,e,s),a._setFocusOnFirstMenuItem(i(".feedbackPopOut")),t.log(f.Feedback,t.OpenPopoutMenu,{EP:t.getEntryPointLogValue(e)}))}},o.prototype._feedbackButtonClickHandler=function(t,i,r){var h,f,u;t&&(t.stopImmediatePropagation(),t.preventDefault());var e=r===10?8:2,o=this._getTaskOptions(e),c=i&&i.id;if(i&&i.isReportable()&&(f=i.getReportOptions(),u=i.getReportType(),o=u===6||u===2||u===1||u===5||u===3?this._getListData(3,r,i.getTitle(),c,i.id,f).options:u===8?this._getListData(7,r,i.getTitle(),c,i.id,f).options:u===7?this._getListData(5,r,i.getTitle(),c,i.id,f).options:u===10||u===11?this._getTaskOptions(e,f):this._getTaskOptions(e)),e===8){var l=this.getStreetsideMode(),a=(h=l.getCurrentBubble())===null||h===void 0?void 0:h.id,v=s.getMapCenter(l.getMap()),w=n.StreetsideFeedbackTitle.replace("{0}",n.StreetsideMapStyle).replace("{1}",n.L_Fdbk_Link),b={state:{title:w,activeTaskId:"",feedbackTaskType:8,entryPoint:10,queryables:{keywords:["Streetside","BubbleId: "+a,v]}}},k=tt(tt({},o),b);o=k;this.closeStreetside(l)}p.invokeHandler(y.taskDataHandlerKey,o)},o.prototype._showMenu=function(n,t,r){var s=this,l=_G.RTL,f=t[0].getBoundingClientRect(),k=document.body.getBoundingClientRect(),a,d,b,y,h,it,p;if(r===1)a=parseInt(i(".b_footer").get_style("height").replace("px","")),c.isMapsAnswer||(a+=10),this._feedbackPopoutMenuElement.set_style({left:l?f.left:f.right+"px",right:"",top:"",bottom:n.length===3?a+48+"px":a+23+"px"});else if(r===6)this._feedbackPopoutMenuElement.set_style({left:f.right+"px",right:"",top:f.top+"px"});else if(r===7){f=this.getRootElement()[0].getBoundingClientRect();d=this._map.getActualSize().height-f.top+20;var rt=n.length===3?25:0,ut=l?"":k.right-f.right-1+"px",ft=l?f.left-1+"px":"";this._feedbackPopoutMenuElement.set_style({right:ut,left:ft,top:"",bottom:d+f.height+rt+"px"})}else this._feedbackPopoutMenuElement.set_style({right:k.right-(f.left+f.right)/2+"px",left:"",top:"",bottom:n.length===3?"147px":"122px"});if(this._popOutButtonViewModel.setDropdownClass("feedbackPopOutTop"),this._popOutButtonViewModel.setIsDisplayed(!0),r===6){var w=i(window).get_scroll_pos().x,et=window.innerHeight/window.document.documentElement.offsetHeight*100<80,g=!(w===0||et),ot=window.innerWidth,o=i(".feedbackPopOutTop",this._feedbackPopoutMenuElement[0]).get_style("width");o=Number(o.replace("px",""));this._popOutButtonViewModel.setIsDisplayed(!1);b=void 0;b=l?g||f.left-o<0?f.right+w:f.left-o:g||ot<f.right+o?f.left+w:f.right+o;this._feedbackPopoutMenuElement.set_style({left:b+"px"});this.disposables.push(this._popOutButtonViewModel.popOutHidden.add(function(){s._taskbar.dismissMenu.invoke()}));this._popOutButtonViewModel.setIsDisplayed(!0)}if(i(".bm_dropdownEntry",this._feedbackPopoutMenuElement[0]).add_event("blur",function(n){s._onBlur(n)}),i(".feedbackPopOutTop",this._feedbackPopoutMenuElement[0]).add_event("mouseout",function(n){s._onMouseOut(n)}),i(".popOutInner",this._feedbackPopoutMenuElement[0]).add_event("pointerout",function(n){s._onMouseOut(n)}),i(".bm_dropdownEntry",this._feedbackPopoutMenuElement[0]).add_event("keydown",function(n){s._onKeyDown(n)}),u.shouldIgnoreSAE){var nt=i(".saeLink"),v=nt?nt.parent():null,e=null,tt=i(".taskCard.focus");for(y=0;y<tt.length;y++)if((h=tt[y],!h.classList.contains("hidden")&&!h.classList.contains("overflow"))&&(it=h.querySelector(".bm_l2NavLeft"),it&&(p=i(".b_feedbackComponent a.b_suggestedit",h),p&&p.length>0))){e=p;break}e||(e=i(".b_feedbackComponent a"));e=e.length===0?i("#epf_infb"):i(e[0]);v.length>0&&e.length>0&&(v.remove_event("click",function(){}),v.remove_attr("data-dropdown"),v.add_event("click",function(n){n.stopImmediatePropagation();e.fireEvent("click")}))}},o.prototype.hideMenu=function(n){var t=this;n===void 0&&(n=!1);window.clearTimeout(o._mouseOverDelayHandle);o._mouseOverDelayHandle=Microsoft.Maps.setTimeout(function(){var f,i;if(!t.menuOpen){if(f=!1,!n){var r=t._feedbackPopoutMenuElement[0]&&t._feedbackPopoutMenuElement.select(".bm_dropdownEntry"),e=t._feedbackPopoutMenuElement[0],u=e&&e.getElementsByClassName("feedbackPopOutTop")[0];if(u&&(u.querySelector(":hover")||u.querySelector(":active")||u.querySelector(":focus")))for(i=0;i<r.length;i++)if(r[i].parentElement.querySelector(":hover")||r[i].parentElement.querySelector(":active")||r[i].parentElement.querySelector(":focus")||r[i].querySelector(":focus")||r[i].querySelector(":hover")||r[i].querySelector(":active")){f=!0;break}}f||t._popOutButtonViewModel&&t._popOutButtonViewModel.setIsDisplayed(!1)}},o._mouseTimeout)},o.prototype._createOptOutLink=function(t){var i=n.FdbkTeolinOptOutLabel;if(i)return{name:i,handler:function(){window.open(t,"__self")}}},o.prototype._onMouseOut=function(){var n=this;window.clearTimeout(o._mouseOverDelayHandle);o._mouseOverDelayHandle=Microsoft.Maps.setTimeout(function(){for(var r=n._feedbackPopoutMenuElement[0]&&n._feedbackPopoutMenuElement.select(".bm_dropdownEntry"),t=0;t<r.length;t++)i(r[t]).remove_event("blur",function(t){n._onBlur(t)}),r[t].blur();n.hideMenu()},o._mouseTimeout-50)},o.prototype._onBlur=function(){this.hideMenu()},o.prototype._onEnter=function(){var n=this._feedbackPopoutMenuElement.select(".bm_dropdownEntry");n.length>0&&n[0].focus()},o.prototype._onKeyDown=function(n){var t=n,r=t.keyCode||t.which,u,f;r===9&&t.shiftKey||r===37?t.srcElement===this._feedbackPopoutMenuElement.select(".bm_dropdownEntry")[0]&&(this._taskbar.hoverFeedbackButton.invoke(),this.hideMenu()):r===40?(u=n.target.nextElementSibling,u&&i(u)[0].focus()):r===38&&(f=n.target.previousElementSibling,f&&i(f)[0].focus())},o.prototype._getListData=function(t,i,r,u,f,e){var o=r,s=undefined;return t===4?(o=n.L_Menu_SuggestAnEdit_Link_Text+" - "+r,r=o,s="saeLink"):(t===3||t===5||t===7)&&(o=a._formatString(n.L_Fdbk_ActiveCard,r)),{name:o,cssClass:s,options:{type:w.feedbackTask,activateOptions:{parentId:f},state:{entryPoint:i,feedbackTaskType:t,activeTaskId:u,title:r,options:e}}}},o.prototype._getTaskOptions=function(t,i,r){var u=i?i:null,f=t?t:2;return{type:w.feedbackTask,state:{entryPoint:this._entryPoint,feedbackTaskType:f,title:r?r:n.L_Fdbk_ReportAProblemOnSearchResult,options:u}}},o.prototype._initFeedbackPopoutMenu=function(){var n=i("#feedbackPopOut");n.length>0||(this._feedbackPopoutMenuElement=a._createElement("div"),this._feedbackPopoutMenuElement.set_attr("class","feedbackPopOut"),this._feedbackPopoutMenuElement.set_attr("id","feedbackPopOut"),this._map.getRootElement().getParent().append(this._feedbackPopoutMenuElement))},o._mouseTimeout=100,o}(yt),ti=function(){function n(n,t,r,f,e,o,s){var h=this,v;if(this._taskBar=t,this._taskManager=r,this._permalink=f,this._map=n,this.menuClickOpen=!1,this.resetFeedback=new k,this._betaFeedbackLinksViewModel=new ot(this,e,s,this._taskBar),this._ssBetaFeedbackLinksViewModel=new ot(this),u.showBetaButton){var a=this._betaFeedbackLinksViewModel.getRootElement(),y=n.getRootElement(),l=y.select(".bm_bottomRightOverlay");l.length>0?(v=l[0].children[0],v?l[0].insertBefore(a[0],v):l.append(a)):y.getParent().append(a)}this.onDisabled=new k;this.onDisabled.addOne(function(){return h._removeFooterHandlers()});this.resetFeedback.add(function(){Microsoft.Maps.setTimeout(function(){h._betaFeedbackLinksViewModel.showHideFeedback(h.getMap().getMode().mapModeType!==2)},500)});o&&o.length>0&&o.set_style({display:"none"});c.isMobile||(e&&e.length!==0?(this._setFooterEvents(e),this._footerFeedback=e):Microsoft.Maps.setTimeout(function(){var n=i("#sb_feedback");n&&n.length>0&&(h._footerFeedback=n,h._setFooterEvents(h._footerFeedback))},500));typeof Feedback!="undefined"&&Feedback.Bootstrap.InitializeFeedback({structured:!0},"mapsOptOut",!1,!0,!1)}return n.prototype.getMap=function(){return this._map},n.prototype.getMapView=function(){return this._map.getView()},n.prototype.getMapType=function(){return this._map.getMapType().id},n.prototype.getMapZoom=function(){return s.getMercatorZoomLevel(this._map)},n.prototype.getActiveTask=function(){var n=this._taskManager.getFocusedStack();return n&&n.getForegroundTask()},n.prototype.getFeedbackControl=function(n){if(u.showBetaButton){if(n===1)return this._betaFeedbackLinksViewModel;if(n===2)return this._ssBetaFeedbackLinksViewModel}},n.prototype.showOrHideBetaButton=function(){var i=this.getMap().getMode(),n=this.getMap().getMapType(),t=i&&i.mapModeType!==2;t&&(t=n&&n.id!==d.birdseye&&n.id!==d.birdseyeV2);this._betaFeedbackLinksViewModel.showBetaButton(t)},n.prototype._removeFooterHandlers=function(){this._footerFeedback&&this._footerFeedback.length>0&&(this._footerClickHandler&&this._footerFeedback.remove_event("click",this._footerClickHandler),this._footerMouseOverHandler&&this._footerFeedback.remove_event("mouseover",this._footerMouseOverHandler),this._footerMouseOutHandler&&this._footerFeedback.remove_event("mouseout",this._footerMouseOutHandler))},n.prototype.sendSurfFeedback=function(n,t,i,r){n.ImpressionGuid=_G.IG;n.ReproURL=this._getReproUrl();n.SchemaVersion=o.SchemaVersion;n.ClientType=o.ClientType_MapWebsite;n.ClientMarket=c.dynamicProperties.market.toLowerCase();c.isMobile||(n.html=this._getScreenShot());n.width=_w.innerWidth;n.height=_w.innerHeight;n.partner=o.Partner_SUrFLegacy;n.Query||(n.Query=this._getQueryData());this._postToSurf(n,t,i,r)},n.prototype.sendLocalFeedback=function(n,t,i){var r;i===void 0&&(i=1);var f=o.FeedbackType_DSAT;n.Referrer=this._getReproUrl();n.RapDebugId=this.GUID();r={};n.Query||(n.Query=this._getQueryData());n.Identifier=t;n.FeedbackType=f;n.ClientType="MapsV8";n.ClientVersion="1.0";n.ReproURL=this._getReproUrl();n.SchemaVersion=o.SchemaVersion;n.ClientMarket=c.dynamicProperties.market.toLowerCase();n.Source="Local";n.Issue="Business Suggestion";n.ImpressionGuid=_G.IG;n.partner="LocalBusinessFeedback";this._postToLocalFeedback(u.surfApiEndpointV2,n,r)},n.prototype._getQueryData=function(){var o=this._taskBar.getSearchTerm(),t,i,u,r,n,f,e;if(o)return o;if(this._taskManager&&(t=this._taskManager.getStacks(),t))for(i=0;i<t.length;i++)if(u=t[i].displayState,u.prominence===2||u.activationState===2)for(r=t[i].getAllTasks(),n=0;n<r.length;n++)if(f=r[n].displayState,(f.prominence===2||f.activationState===2)&&(e=r[n].getTitle(),e&&ct&&e!==ct.LocalGuideCategory))return r[n].getTitle();return"NULL"},n.prototype._setFooterEvents=function(n){var t=this;n&&(this._footerClickHandler=function(n){return t._footerLinkClickHandler(n)},n.add_event("click",this._footerClickHandler),this._footerMouseOverHandler=function(n){return t._footerLinkMouseOverHandler(n)},n.add_event("mouseover",this._footerMouseOverHandler),this._footerMouseOutHandler=function(n){return t._footerLinkMouseOutHandler(n)},n.add_event("mouseout",this._footerMouseOutHandler),ht.getFunctionalTestHooksEnabled()&&ht.addDataTag(n,"Feedback.Handler.Attached"))},n.prototype._footerLinkClickHandler=function(n){n.stopImmediatePropagation();n.preventDefault();this._betaFeedbackLinksViewModel.menuOpen;this.menuClickOpen=!0;var t=this.getActiveTask(),i=t&&t.getReportType?t.getReportType()===4:!1;this._betaFeedbackLinksViewModel.feedbackClick=!i;this._betaFeedbackLinksViewModel.startFeedbackTask(this._footerFeedback,1,n)},n.prototype._footerLinkMouseOverHandler=function(n){n.stopImmediatePropagation();n.preventDefault();this._betaFeedbackLinksViewModel.menuOpen=!0;var t=this.getActiveTask(),i=t&&t.getReportType?t.getReportType()===4:!1;this._betaFeedbackLinksViewModel.feedbackClick=!i;this.menuClickOpen=!this._betaFeedbackLinksViewModel.feedbackClick;this._betaFeedbackLinksViewModel.feedbackClick||this._betaFeedbackLinksViewModel.startFeedbackTask(this._footerFeedback,1)},n.prototype._footerLinkMouseOutHandler=function(n){n.stopImmediatePropagation();n.preventDefault();this.menuClickOpen||(this._betaFeedbackLinksViewModel.menuOpen=!1);this._betaFeedbackLinksViewModel.hideMenu()},n.prototype._postToLocalFeedback=function(n,t,r){var u={},f;u["Content-Type"]="application/json";f={queryParameters:r,headers:u};ut.doPost(n,i.Internals.stringify(t),f)},n.prototype.getRandomNumber=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},n.prototype.GUID=function(){return(this.getRandomNumber()+this.getRandomNumber()+this.getRandomNumber()+this.getRandomNumber()+this.getRandomNumber()+this.getRandomNumber()+this.getRandomNumber()+this.getRandomNumber()).toLowerCase()},n.prototype._postToSurf=function(n,t,r,f){ut.doPost(u.surfApiEndpointV2,i.Internals.stringify(n),f)},n.prototype.takeScreenShot=function(){this._screenShot=Feedback.PackageLoad.GetHTML()},n.prototype._getScreenShot=function(){return this._screenShot?this._screenShot:Feedback.PackageLoad.GetHTML()},n.prototype.generateReproUrl=function(){var n=this;this._permalink.getGeneralPermalink(this._map,function(t){n._reproUrl=t.permalink},function(){return n._reproUrl=""},kt.Feedback)},n.prototype._getReproUrl=function(){return this._reproUrl},n}(),di=function(t){function i(i,r){var u=this,f={};return u=t.call(this,f)||this,u.stepChanged=new k,u.resources=n,u._panelViewModel=r,f.defineProperty("directionsIssueStep",function(){return u._directionStepsChanged()}),f.defineProperty("commentsDirectionsStep"),u._prePopulateDirectionsStepDropdowns(i),u}return v(i,t),i.prototype._prePopulateDirectionsStepDropdowns=function(t){var i=this;this.directionsSteps=[];this.directionsSteps.push({text:n.L_Fdbk_SelectSubProblem,value:""});t.forEach(function(n){i.directionsSteps.push({text:n,value:n})});this.setDirectionsIssueStep({text:n.L_Fdbk_SelectSubProblem,value:""})},i.prototype._directionStepsChanged=function(){var n=this.getDirectionsIssueStep().value;n.length>0&&this.stepChanged.invoke()},i}(ri),gi=function(r){function e(t,i,f,e){var o=this,s={};return o=r.call(this,s,t,ai,i)||this,o.feedbackType=f,o.newFeedbackInputHeader=n.L_Fdbk_GeneralCardInputHeader,o.newFeedbackTextWatermark=n.L_Fdbk_GeneralCardTextWatermark,o.isMobile=c.isMobile,o.emailDisplay=u.emailEnabled?"":"none",o.emailLabel=n.L_Fdbk_Email,o.privacyPolicyLinkDisplay=u.emailEnabled?"":"none",o.privacyPolicyLink=u.privacyPolicyLink,o.overallRating=-1,o.feedbackTimeout=250,o.feedbacklQueryables=e,s.defineProperty("showFeedbackHeader"),s.defineProperty("showGeneralFeedbackPanel"),s.defineProperty("showProblemOnMapPanel"),s.defineProperty("showThankYouPanel"),s.defineProperty("reminderMessage"),s.defineProperty("problemType",o._onProblemTypeChanged),s.defineProperty("subProblemType",o._onSubProblemTypeChanged),s.defineProperty("unHappySelected",null,null,{defaultValue:!1}),s.defineProperty("happySelected",null,null,{defaultValue:!1}),s.defineProperty("showAddressInput",null,null,{defaultValue:!1}),s.defineProperty("showPostcodeInput",null,null,{defaultValue:!1}),s.defineProperty("addressGhostText",null,null,{defaultValue:n.FdbkStreetGhost}),s.defineProperty("userAddress",null,null,{defaultValue:""}),s.defineProperty("userPostcode",null,null,{defaultValue:""}),o._prePopulateProblemDropdowns(),o.setShowFeedbackHeader(!1),o.setShowGeneralFeedbackPanel(f!==2),o.setShowProblemOnMapPanel(f===2),o.setShowThankYouPanel(!1),o.setShowMessagePanel(!1),o.setReminderMessage(""),o}return v(e,r),e.prototype.dispose=function(){window.clearTimeout(this.feedbackTimeoutHandler);r.prototype.dispose},e.prototype.onOverallHappyButtonClick=function(n){this._onOverallButtonClick(n,1)},e.prototype.onOverallUnhappyButtonClick=function(n){this._onOverallButtonClick(n,0)},e.prototype._onOverallButtonClick=function(n,t){n.preventDefault();var i=t?this._getOverallHappyButton():this._getOverallUnhappyButton(),r=t?this._getOverallUnhappyButton():this._getOverallHappyButton();this.overallRating===t?(i.remove_class("overallSelected"),this._setHappyButtonsState(-1),this.overallRating=-1):(i.add_class("overallSelected"),r.remove_class("overallSelected"),this._setHappyButtonsState(t),this.overallRating=t)},e.prototype._setHappyButtonsState=function(n){n===-1?(this.setHappySelected(!1),this.setUnHappySelected(!1)):n===0?(this.getUnHappySelected()||this.setUnHappySelected(!0),this.setHappySelected(!1)):n===1&&(this.getHappySelected()||this.setHappySelected(!0),this.setUnHappySelected(!1))},e.prototype.onGeneralFeedbackSendClick=function(i){var e;if(i.preventDefault(),this.overallRating===-1&&this.commentsGeneral.length===0){this._showMessagePanel(!0,n.L_Fdbk_GeneralFeedback_Reminder);t.log(f.Feedback,"S",{FT:t.FeedbackType_General,SR:"RI"});return}var r=s.getMapBounds(this.getMap(),!1),o=s.getMapCenter(this.getMap()),h=s.getMercatorZoomLevel(this.getMap()),u=l.FeedbackType_Suggestion;this.overallRating===1?u=l.FeedbackType_SAT:this.overallRating===0&&(u=l.FeedbackType_DSAT);e={FORM:l.FORM_General,MapStyle:this.getMap().getMapType().displayName,MapViewBoundingBox:{NELatLon:{Latitude:r.getNorth(),Longitude:r.getEast()},SWLatLon:{Latitude:r.getSouth(),Longitude:r.getWest()}},MapViewCenter:{Latitude:o.latitude,Longitude:o.longitude},Zoom:h,FeedbackType:u,Scenario:l.Scenario_General,UserComment:this.commentsGeneral,Issue:this._createKeywords("Feedback"),alias:this.email,send_mail:!0};this.feedbacklQueryables&&(e.keywords=et([],this.feedbacklQueryables.keywords,!0));this.feedbackTask.sendSurfFeedback(e,"","");this.setShowGeneralFeedbackPanel(!1);this.setShowMessagePanel(!1);this.setShowThankYouPanel(!0);this._focusInThankYouPanel();this.isSubmitted=!0;t.log(f.Feedback,"S",{FT:t.FeedbackType_General,SR:"SM"})},e.prototype.onProblemOnMapSendClick=function(i){i.preventDefault();var e=this.getProblemType().value,r=this.getSubProblemType().value,o=n.FdbkAddressErrorWithPin,u=!1;if(e!==0&&this.commentsBaseMap.length!==0&&this.isPushpinMoved()?e===2?r===0?(this._showMessagePanel(!0,o),u=!0):(r===10||r===11)&&this.getUserAddress().length===0&&(this._showMessagePanel(!0,o),u=!0):e===1&&r===1&&this.getUserAddress().length===0&&(this._showMessagePanel(!0,o),u=!0):(this._showMessagePanel(!0,o),u=!0),u){t.log(f.Feedback,"S",{FT:t.FeedbackType_BaseMap,SR:"RI"});return}var h=s.getMapBounds(this.getMap(),!1),c=s.getMapCenter(this.getMap()),v=s.getMercatorZoomLevel(this.getMap()),a=this.getShowPostcodeInput(),y={FORM:l.FORM_ProblemOnMap,MapStyle:this.getMap().getMapType().displayName,MapViewBoundingBox:{NELatLon:{Latitude:h.getNorth(),Longitude:h.getEast()},SWLatLon:{Latitude:h.getSouth(),Longitude:h.getWest()}},MapViewCenter:{Latitude:c.latitude,Longitude:c.longitude},Zoom:v,FeedbackType:l.FeedbackType_DSAT,Scenario:l.Scenario_Map,IssueEntity:{GeoLocation:{Latitude:this.getPushpinLocation().latitude,Longitude:this.getPushpinLocation().longitude},ReverseGeocodeAddress:{AddressLine:""}},IssueEntityType:l.GetStargateIssueEntityType(e),Issue:l.GetStargateSubProblemValue(r),UserProvidedAddress:a?this.getUserAddress():null,UserProvidedPostcode:this.getUserPostcode(),UserProvidedStreetname:a?null:this.getUserAddress(),UserComment:this.commentsBaseMap,IsPushpinMoved:this.isPushpinMoved()};this.feedbackTask.sendSurfFeedback(y,l.ParamFt_BaseMap,l.ParamSrc_BaseMap);this.isSubmitted=!0;t.log(f.Feedback,"S",{FT:t.FeedbackType_BaseMap,SR:"SM"});this.setShowProblemOnMapPanel(!1);this.setShowMessagePanel(!1);this.setShowThankYouPanel(!0);this._focusInThankYouPanel();this.hidePushpin()},e.prototype.onClearError=function(n){r.prototype.onClearError.call(this,n)},e.prototype.onFeedbackDoneClick=function(n){n.preventDefault();window.clearTimeout(this.feedbackTimeoutHandler);p.invokeHandler(y.taskDataHandlerKey,{action:"removeStackForTask",id:this.feedbackTask.id});c.isMobile&&i("#feedbackWrapper").add_class("collapsed")},e.prototype.onReportAProblemOnMapClick=function(n){this._switchPanel(n,2);this.showPushpin()},e.prototype.onSendGeneralFeedbackClick=function(n){this._switchPanel(n,1);this.hidePushpin()},e.prototype._switchPanel=function(i,r){i.preventDefault();this._showMessagePanel(!1);this.showPushpinReminderMessage=!0;this.feedbackType=r;r===2?(this.setShowGeneralFeedbackPanel(!1),this.setShowProblemOnMapPanel(!0),this.feedbackTask.setTitle(n.L_Fdbk_ReportAProblem)):(this.setShowProblemOnMapPanel(!1),this.setShowGeneralFeedbackPanel(!0),this.feedbackTask.setTitle(n.L_Fdbk_GeneralFeedback));this.setFocusToDefaultElement();t.log(f.Feedback,"C",{FT:t.getFeedbackTypeLogValue(r)})},e.prototype._createKeywords=function(n){return n+";"+(this.overallRating!==-1?"OVERALL-"+this.overallRating.toString()+";":"")},e.prototype.getDefaultFocusElement=function(){var n,t;return this.feedbackType===2&&(n=this._getElementObj(".feedbackCardInputDiv.problemSelect"),n&&n.length&&(t=n.select(".selectControl"),t&&t.length))?t.select(".popOutButton.dropdownBtn"):this._getOverallHappyButton()},e.prototype.getFeedbackTitle=function(t){return t?n.L_Fdbk_SendGeneralFeedback:n.L_Fdbk_ReportAProblem},e.prototype._getOverallHappyButton=function(){return this._getElementObj(".happyButton")},e.prototype._getOverallUnhappyButton=function(){return this._getElementObj(".unhappyButton")},e.prototype._getElementObj=function(n){return this.getControl().select(n)},e.prototype._showMessagePanel=function(n,t){n?(this.setShowMessagePanel(!0),this.setReminderMessage(t)):(this.setShowMessagePanel(!1),this.setReminderMessage(""))},e.prototype.hasInput=function(n){var t=this.getProblemType(),i=this.getSubProblemType();return n===2?t&&t.value!==0||i&&i.value!==0||this.commentsBaseMap.length!==0:this.overallRating!==-1||this.commentsGeneral.length!==0},e.prototype._prePopulateProblemDropdowns=function(){this.problemTypes=[{text:n.L_Fdbk_SelectProblem,value:0},{text:n.L_Fdbk_ProblemRoad,value:1},{text:n.L_Fdbk_ProblemAddress,value:2},{text:n.L_Fdbk_ProblemCity,value:3},{text:n.L_Fdbk_ProblemNeighborhood,value:4},{text:n.L_Fdbk_ProblemAdministrativeDistricts,value:5},{text:n.TerrainProblemType,value:6},{text:n.L_Fdbk_ProblemWater,value:7},{text:n.L_Fdbk_ProblemBridge,value:8},{text:n.L_Fdbk_ProblemAirport,value:9},{text:n.L_Fdbk_ProblemImagery,value:12},{text:n.L_Fdbk_Other,value:13}];this.subProblemTypes=new nt([]);this.setProblemType({text:n.L_Fdbk_SelectProblem,value:0});this.setSubProblemType({text:n.L_Fdbk_SelectSubProblem,value:0})},e.prototype._onProblemTypeChanged=function(t,i){if(i!=null){this.subProblemTypes.clear();var r=[];this.setSubProblemType({text:n.L_Fdbk_SelectSubProblem,value:0});switch(i.value){case 1:r.push({text:n.L_Fdbk_RoadNameIncorrect,value:1},{text:n.L_Fdbk_RoadRemove,value:2},{text:n.L_Fdbk_RoadLocationIncorrect,value:3},{text:n.L_Fdbk_RoadMissing,value:4},{text:n.L_Fdbk_RoadClosed,value:5},{text:n.L_Fdbk_RoadTypeIncorrect,value:6},{text:n.L_Fdbk_RoadOneWay,value:7},{text:n.L_Fdbk_RoadTwoWay,value:8},{text:n.L_Fdbk_RoadOneWayOpposite,value:9},{text:n.L_Fdbk_Other,value:54});break;case 2:r.push({text:n.L_Fdbk_AddressMissing,value:10},{text:n.L_Fdbk_AddressLocationIncorrect,value:11},{text:n.L_Fdbk_AddressSideIncorrect,value:12},{text:n.L_Fdbk_AddressZipIncorrect,value:13},{text:n.L_Fdbk_AddressZipMissing,value:14},{text:n.L_Fdbk_Other,value:54});break;case 3:r.push({text:n.L_Fdbk_CityNameIncorrect,value:15},{text:n.L_Fdbk_CityLocationIncorrect,value:16},{text:n.L_Fdbk_CityMissing,value:17},{text:n.L_Fdbk_CityNeighborhood,value:18},{text:n.L_Fdbk_Other,value:54});break;case 4:r.push({text:n.L_Fdbk_NeighborhoodNameIncorrect,value:19},{text:n.L_Fdbk_NeighborhoodLocationIncorrect,value:20},{text:n.L_Fdbk_NeighborhoodMissing,value:21},{text:n.L_Fdbk_NeighborhoodCity,value:22},{text:n.L_Fdbk_Other,value:54});break;case 5:r.push({text:n.L_Fdbk_AdminDistrictsCountryBoundary,value:23},{text:n.L_Fdbk_AdminDistrictsStateBoundary,value:24},{text:n.L_Fdbk_AdminDistrictsCountyBoundary,value:25},{text:n.L_Fdbk_AdminDistrictsEntityMissing,value:26},{text:n.L_Fdbk_AdminDistrictsWrongEntity,value:27},{text:n.L_Fdbk_AdminDistrictsCountryName,value:28},{text:n.L_Fdbk_AdminDistrictsStateName,value:29},{text:n.L_Fdbk_AdminDistrictsCountyName,value:30},{text:n.L_Fdbk_Other,value:54});break;case 6:r.push({text:n.L_Fdbk_LandFeatureNameIncorrect,value:31},{text:n.L_Fdbk_LandTypeIncorrect,value:32},{text:n.L_Fdbk_LandFeatureMissing,value:33},{text:n.L_Fdbk_LandLocationIncorrect,value:34},{text:n.L_Fdbk_Other,value:54});break;case 7:r.push({text:n.L_Fdbk_WaterMissing,value:35},{text:n.L_Fdbk_WaterLocationIncorrect,value:36},{text:n.L_Fdbk_WaterNameIncorrect,value:37},{text:n.L_Fdbk_WaterTypeIncorrect,value:38},{text:n.L_Fdbk_Other,value:54});break;case 8:r.push({text:n.L_Fdbk_BridgeClosed,value:39},{text:n.L_Fdbk_BridgeNameIncorrect,value:40},{text:n.L_Fdbk_BridgeMissing,value:41},{text:n.L_Fdbk_BridgeRemoved,value:42},{text:n.L_Fdbk_BridgeLocationIncorrect,value:43},{text:n.L_Fdbk_Other,value:54});break;case 9:r.push({text:n.L_Fdbk_AirportIncorrect,value:45},{text:n.L_Fdbk_AirportMissing,value:46},{text:n.L_Fdbk_AirportWrongLocation,value:44},{text:n.L_Fdbk_Other,value:54});break;case 12:r.push({text:n.L_Fdbk_ImageryOutOfDate,value:51},{text:n.L_Fdbk_ImageryBlurry,value:51},{text:n.L_Fdbk_ImageryRoadMismatch,value:53},{text:n.L_Fdbk_Other,value:54});break;case 13:r.push({text:n.L_Fdbk_Other,value:54});break;default:r.push({text:n.L_Fdbk_SelectSubProblem,value:0})}this.subProblemTypes.insertAll(r)}},e.prototype._onSubProblemTypeChanged=function(t,i){var u=i.value===1,r=i.value===10,f=i.value===11;this.setAddressGhostText(r?n.FdbkNumberAndStreetGhost:n.FdbkStreetGhost);this.setShowAddressInput(r||f||u);this.setShowPostcodeInput(r)},e.prototype._focusInThankYouPanel=function(){r.prototype._focusInThankYouPanel.call(this)},e}(it);r.MapsFeedback=ti;r.FeedbackTask=ki;r.CommonControls.BetaFeedbackLinksViewModel=ot}catch(lt){if(r.logger)r.logger.logCriticalError(lt);else throw lt;}}).call(window)