var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),BootstrapMapsAnswerForEntityOverlay=function(n){function t(t,i){var r=n.call(this,t,i)||this,u,f;return r._entityOverlayDetailsCardWidth=472,r._entityOverlayDetailsWidthWC=464,r._entityPadding={left:390,right:0,top:145,bottom:0},r._isHotelOverlay=!1,r._isRestaurantOverlay=!1,r._subscribeForForegroundTaskEvent(),u=r._mapOptions&&r._mapOptions.searchQueryCategory,u&&(f=Microsoft.Maps.Internal._Helper,r._isHotelOverlay=f._isHotelsCategory(u),r._isRestaurantOverlay=f._isRestaurantCategory(u)),r}return __extends(t,n),t.prototype.getPadding=function(){var n=Microsoft.Maps.GlobalConfig.features.localSearch;if(n&&this.padding){var c=Microsoft.Maps.GlobalConfig.features.taskFramework,i=c.newCardSizingForTCF,r=i?32:30,f=i?62:0,u=i?0:this._entityPadding.right,e=i?0:this._entityPadding.top;if(n.enablePoiCentering){if(n&&n.doubleWideListEnabled&&(this._isRestaurantOverlay||this._isHotelOverlay)&&this.padding){var o=this._isRestaurantOverlay?"Restaurant":"Hotel",t=n.threeColumnListSegmentsEnabled,s=t&&t.length&&t.indexOf(o)>-1,h={left:n.defaultListPlusDetailsCardWidth+r+f,right:u,top:e,bottom:this._entityPadding.bottom};return s&&this._gimme("body")[0].clientWidth>n.threeColumnMinBrowserWidth&&(h={left:n.threeColumnListPlusDetailsCardWidth+r+f,right:u,top:e,bottom:this._entityPadding.bottom}),h}this._entityPadding={left:n.baseCardWidth+r+f,right:u,top:e,bottom:this._entityPadding.bottom}}else if(n&&n.doubleWideListEnabled&&(this._isRestaurantOverlay||this._isHotelOverlay)&&this.padding){var o=this._isRestaurantOverlay?"Restaurant":"Hotel",t=n.threeColumnListSegmentsEnabled,s=t&&t.length&&t.indexOf(o)>-1;return{left:(s?n.threeColumnListPlusDetailsCardWidth:n.defaultListPlusDetailsCardWidth)+r,right:u,top:this._entityPadding.top,bottom:this._entityPadding.bottom}}}return this._entityPadding},t.prototype.getDetailsCardWidth=function(){return Microsoft.Maps.GlobalConfig.features.localSearch.enablePoiCentering?this._entityOverlayDetailsWidthWC:this._entityOverlayDetailsCardWidth},t.prototype._turnOnOrOffOverlayComponents=function(t){var r=t?"block":"none",u=Microsoft.Maps.Internal._Gimme,f=u(".ol_mapsearchbutton")[0],i;f&&(f.style.display=r);n.prototype._turnOnOrOffOverlayComponents.call(this,t);i=u("#filterBarContainerForEntityOverlay")[0];i&&(i.style.display=r)},t.prototype._subscribeForForegroundTaskEvent=function(){var n=this;sj_evt.bind("TaskActivated",function(t){n._updateElementsBasedOnFilter(t)});sj_evt.bind("SearchResponseReceived",function(t){n._updateElementsBasedOnFilter(t)})},t.prototype._updateElementsBasedOnFilter=function(n){var e=Microsoft.Maps.GlobalConfig.features.localSearch.showInlineFilters;if(!e){var i=Microsoft.Maps.Internal._Gimme,u=n&&n[1]&&n[1].IG,t=i("#MicrosoftNav"),r=i(".taskLayoutContainer")[0],f=u&&i("#FilterBar_"+u)[0];t&&(f?(t.add_class("WithContextualTaskBar"),t.add_class("OnLocalOverlay")):(t.remove_class("WithContextualTaskBar"),t.remove_class("OnLocalOverlay")));r&&(f?r.classList.add("withfilterbar"):r.classList.remove("withfilterbar"))}},t.prototype._initOverlayScenario=function(){n.prototype._initOverlayScenario.call(this);Microsoft.Maps.GlobalConfig.dynamicProperties.map=this._map},t.prototype._getOverlayType=function(){return"localOverlay"},t.prototype._setOverlayClassOverrides=function(n){this._updateClassOverrides(n,"localoverlay","localOverlay")},t.prototype.fireMapDataRenderEnd=function(){var n=this._map&&this._map.entities&&this._map.entities.getFrameManager()&&this._map.entities.getFrameManager().frameRendered;n&&n.addOne(function(){sj_evt.fire("v8MapDataRenderEnd")})},t}(BootstrapMapsAnswerForMapOverlay)